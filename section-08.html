<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CA DMV Practice Test -- Safe Driving</title>
<style>
*, *::before, *::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  background: #f5f7fa;
  color: #1a1a2e;
  line-height: 1.6;
}

#app {
  max-width: 800px;
  margin: 0 auto;
  padding: 16px;
}

/* Header */
header {
  text-align: center;
  margin-bottom: 16px;
}

header h1 {
  font-size: 1.5rem;
  margin: 0 0 12px 0;
  color: #003366;
}

#progress-bar-container {
  width: 100%;
  height: 8px;
  background: #dde1e7;
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 10px;
}

#progress-bar {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #2e7d32, #43a047);
  border-radius: 4px;
  transition: width 0.3s ease;
}

#score-display {
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
}

.score-chip {
  display: inline-block;
  padding: 4px 12px;
  border-radius: 16px;
  font-size: 0.85rem;
  font-weight: 600;
}

.correct-chip {
  background: #e8f5e9;
  color: #2e7d32;
}

.incorrect-chip {
  background: #ffebee;
  color: #c62828;
}

.unanswered-chip {
  background: #e3f2fd;
  color: #1565c0;
}

/* Filter bar */
#filter-bar {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
  margin-bottom: 20px;
  padding: 12px;
  background: #ffffff;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.08);
}

.filter-group {
  display: flex;
  align-items: center;
  gap: 4px;
}

.filter-group label {
  font-size: 0.8rem;
  font-weight: 600;
  color: #555;
  white-space: nowrap;
}

.filter-group select {
  font-size: 0.85rem;
  padding: 4px 8px;
  border: 1px solid #ccc;
  border-radius: 4px;
  background: #fff;
  max-width: 180px;
}

#btn-shuffle, #btn-reset {
  font-size: 0.85rem;
  padding: 5px 14px;
  border: 1px solid #ccc;
  border-radius: 4px;
  background: #fff;
  cursor: pointer;
  font-weight: 600;
  color: #333;
  transition: background 0.2s;
}

#btn-shuffle:hover, #btn-reset:hover {
  background: #eee;
}

/* Question container */
#question-container {
  background: #ffffff;
  border-radius: 12px;
  padding: 24px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

#question-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 16px;
}

#q-counter {
  font-weight: 700;
  font-size: 0.95rem;
  color: #003366;
}

.meta-tag {
  font-size: 0.75rem;
  padding: 2px 10px;
  border-radius: 12px;
  background: #e8eaf6;
  color: #283593;
  font-weight: 600;
}

/* Image */
#q-image-wrapper {
  text-align: center;
  margin-bottom: 16px;
}

#q-image {
  max-width: 100%;
  max-height: 360px;
  border-radius: 8px;
  border: 1px solid #ddd;
  object-fit: contain;
}

/* Question text */
#q-text {
  font-size: 1.1rem;
  font-weight: 500;
  margin-bottom: 20px;
  line-height: 1.5;
}

/* Choices */
#choices-container {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 20px;
}

.choice-btn {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  width: 100%;
  padding: 12px 16px;
  border: 2px solid #dde1e7;
  border-radius: 8px;
  background: #fafbfc;
  cursor: pointer;
  text-align: left;
  font-size: 1rem;
  line-height: 1.4;
  transition: border-color 0.15s, background 0.15s;
}

.choice-btn:hover:not(:disabled) {
  border-color: #90caf9;
  background: #e3f2fd;
}

.choice-btn:disabled {
  cursor: default;
}

.choice-letter {
  font-weight: 700;
  color: #555;
  min-width: 24px;
  flex-shrink: 0;
}

.choice-text {
  flex: 1;
}

.choice-selected {
  border-color: #1976d2;
  background: #e3f2fd;
}

.choice-correct {
  border-color: #2e7d32 !important;
  background: #e8f5e9 !important;
}

.choice-correct .choice-letter {
  color: #2e7d32;
}

.choice-incorrect {
  border-color: #c62828 !important;
  background: #ffebee !important;
}

.choice-incorrect .choice-letter {
  color: #c62828;
}

/* Feedback */
#feedback {
  margin-bottom: 16px;
  padding: 12px 16px;
  border-radius: 8px;
  font-size: 0.95rem;
}

.feedback-correct {
  color: #2e7d32;
  font-weight: 700;
  font-size: 1.05rem;
}

.feedback-incorrect {
  color: #c62828;
  font-weight: 700;
  font-size: 1.05rem;
}

.feedback-neutral {
  color: #555;
  font-weight: 600;
}

#explanation {
  margin-top: 10px;
  padding: 12px 16px;
  background: #fff8e1;
  border-left: 4px solid #ffa000;
  border-radius: 4px;
  font-size: 0.95rem;
  line-height: 1.5;
}

/* Buttons */
#action-buttons {
  text-align: center;
  margin-bottom: 16px;
}

.btn-primary {
  padding: 10px 28px;
  font-size: 1rem;
  font-weight: 600;
  color: #fff;
  background: #1976d2;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s;
  margin: 4px;
}

.btn-primary:hover {
  background: #1565c0;
}

#nav-buttons {
  display: flex;
  justify-content: space-between;
}

.btn-nav {
  padding: 10px 24px;
  font-size: 0.95rem;
  font-weight: 600;
  color: #333;
  background: #e0e0e0;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s;
}

.btn-nav:hover:not(:disabled) {
  background: #bdbdbd;
}

.btn-nav:disabled {
  opacity: 0.4;
  cursor: default;
}

/* Summary */
#summary-container {
  background: #ffffff;
  border-radius: 12px;
  padding: 32px 24px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  text-align: center;
}

#summary-container h2 {
  color: #003366;
  margin-top: 0;
}

.summary-big-score {
  font-size: 2.5rem;
  font-weight: 800;
  color: #1a1a2e;
  margin: 16px 0 4px;
}

.summary-pct {
  font-size: 1.3rem;
  font-weight: 700;
  margin-bottom: 16px;
}

.summary-pass { color: #2e7d32; }
.summary-fail { color: #c62828; }

.summary-detail {
  margin-bottom: 24px;
}

.breakdown-table {
  width: 100%;
  border-collapse: collapse;
  margin: 16px 0 24px;
  font-size: 0.9rem;
  text-align: left;
}

.breakdown-table th {
  background: #e8eaf6;
  padding: 8px 12px;
  font-weight: 700;
  color: #283593;
}

.breakdown-table td {
  padding: 8px 12px;
  border-bottom: 1px solid #eee;
}

/* Empty state */
#empty-state {
  text-align: center;
  padding: 48px 24px;
  color: #777;
  font-size: 1.1rem;
}

/* Back link */
.back-link {
  display: inline-block;
  margin-bottom: 8px;
  font-size: 0.9rem;
  color: #1976d2;
  text-decoration: none;
  font-weight: 600;
}

.back-link:hover {
  text-decoration: underline;
}

/* Extra questions link */
.extra-link {
  display: block;
  text-align: center;
  margin-top: 24px;
  padding: 14px 24px;
  background: #ffffff;
  border: 2px solid #1976d2;
  border-radius: 12px;
  color: #1976d2;
  font-weight: 600;
  font-size: 1rem;
  text-decoration: none;
  transition: background 0.2s, color 0.2s;
}

.extra-link:hover {
  background: #1976d2;
  color: #ffffff;
}

/* Responsive */
@media (max-width: 600px) {
  #app { padding: 8px; }
  header h1 { font-size: 1.2rem; }
  #question-container { padding: 16px; }
  #q-text { font-size: 1rem; }
  .choice-btn { padding: 10px 12px; font-size: 0.95rem; }
  #filter-bar { gap: 6px; padding: 8px; }
  .filter-group select { max-width: 120px; }
  .summary-big-score { font-size: 2rem; }
}

</style>
</head>
<body>

<div id="app">
  <!-- Header -->
  <header id="header">
    <a href="index.html" class="back-link">&larr; All Sections</a>
    <h1>CA DMV Practice Test -- Safe Driving</h1>
    <div id="progress-bar-container">
      <div id="progress-bar"></div>
    </div>
    <div id="score-display">
      <span id="score-correct" class="score-chip correct-chip">Correct: 0</span>
      <span id="score-incorrect" class="score-chip incorrect-chip">Incorrect: 0</span>
      <span id="score-unanswered" class="score-chip unanswered-chip">Remaining: 0</span>
    </div>
  </header>

  <!-- Filter controls -->
  <div id="filter-bar">
    <div class="filter-group" style="display:none;">
      <label for="filter-section">Section:</label>
      <select id="filter-section"><option value="all">All Sections</option></select>
    </div>
    <div class="filter-group">
      <label for="filter-topic">Topic:</label>
      <select id="filter-topic"><option value="all">All Topics</option></select>
    </div>
    <div class="filter-group">
      <label for="filter-difficulty">Difficulty:</label>
      <select id="filter-difficulty"><option value="all">All</option></select>
    </div>
    <div class="filter-group">
      <label for="filter-type">Type:</label>
      <select id="filter-type"><option value="all">All</option></select>
    </div>
    <button id="btn-shuffle" title="Shuffle questions">Shuffle</button>
    <button id="btn-reset" title="Reset all answers">Reset</button>
  </div>

  <!-- Question slide -->
  <div id="question-container" style="display:none;">
    <div id="question-meta">
      <span id="q-counter">Question 1 of 1</span>
      <span id="q-section-label" class="meta-tag"></span>
      <span id="q-topic-label" class="meta-tag"></span>
      <span id="q-difficulty-label" class="meta-tag"></span>
    </div>

    <div id="q-image-wrapper" style="display:none;">
      <img id="q-image" alt="Question image" />
    </div>

    <div id="q-text"></div>

    <div id="choices-container"></div>

    <div id="feedback" style="display:none;">
      <div id="feedback-text"></div>
      <div id="explanation" style="display:none;"></div>
    </div>

    <div id="action-buttons">
      <button id="btn-show-answer" class="btn-primary">Show Answer</button>
    </div>

    <div id="nav-buttons">
      <button id="btn-prev" class="btn-nav" disabled>&larr; Previous</button>
      <button id="btn-next" class="btn-nav">Next &rarr;</button>
    </div>
  </div>

  <!-- Summary page -->
  <div id="summary-container" style="display:none;">
    <h2>Test Complete</h2>
    <div id="summary-score"></div>
    <div id="summary-breakdown"></div>
    <button id="btn-review" class="btn-primary">Review Answers</button>
    <button id="btn-restart" class="btn-primary">Restart</button>
  </div>

  <!-- Empty state -->
  <div id="empty-state" style="display:none;">
    <p>No questions match the current filters. Try adjusting your selection.</p>
  </div>

  <!-- Extra questions link -->
  <a href="section-08-extra.html" class="extra-link">Additional Practice Questions &rarr;</a>
</div>

<script>
'use strict';
(function() {

/* ---- Data ---- */
var ALL_QUESTIONS = JSON.parse('[{"question_id": "q-sec08-handle-emergencies-034", "question_type": "multiple_choice", "question_text": "If your vehicle stalls on railroad tracks and a train is approaching with warning lights flashing, what should you do?", "choices": [{"label": "A", "text": "Stay in the vehicle and call 911"}, {"label": "B", "text": "Try to push the vehicle off the tracks"}, {"label": "C", "text": "Immediately exit your vehicle and run away from the tracks diagonally in the direction the train is coming from"}, {"label": "D", "text": "Exit the vehicle and run straight away from the tracks perpendicular to them"}], "correct_answer": "C", "explanation": "If your vehicle stalls on railroad tracks with a train approaching and warning lights flashing, immediately exit your vehicle and run away from the tracks diagonally in the direction the train is coming from. Then call 911.", "section_id": "section-08", "topic": "Know How to Handle Emergencies", "subtopic": "Disabled Vehicles on Railroad Tracks", "difficulty": "hard", "image_id": null, "image_file": null, "source_facts": ["If your vehicle stalls or stops while blocking part of a train track with a train approaching and warning lights flashing, immediately exit your vehicle.", "If a train is approaching and warning lights are flashing, run away from the tracks diagonally in the direction the train is coming from, then call 911."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-aware-of-your-surroundings-037", "question_type": "scenario", "question_text": "You are about to change lanes on a busy freeway. You check your side mirrors but do not see any vehicles beside you. Should you proceed with the lane change?", "choices": [{"label": "A", "text": "Yes, if your mirrors are clear it is safe to change lanes"}, {"label": "B", "text": "No, you should also check your blind spots by looking over your shoulder before changing lanes"}, {"label": "C", "text": "Yes, but only if you are using your turn signal"}, {"label": "D", "text": "No, you should wait until there are no other vehicles on the freeway"}], "correct_answer": "B", "explanation": "Before changing lanes, you must also check your blind spots by looking over your right or left shoulder out of your side windows. Mirrors alone cannot show you everything, as blind spots are areas around the vehicle that cannot be seen using mirrors.", "section_id": "section-08", "topic": "Be Aware of Your Surroundings", "subtopic": "Blind Spots", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Check your blind spots before you change lanes.", "Blind spots are areas around the vehicle that a driver cannot see when looking straight ahead or using the mirrors."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-039", "question_type": "scenario", "question_text": "You are preparing to install a rear-facing car seat for your 18-month-old baby who weighs 25 pounds and is 2 feet 10 inches tall. Your vehicle has a front passenger airbag. Where should you install the car seat?", "choices": [{"label": "A", "text": "In the front passenger seat"}, {"label": "B", "text": "In the rear seat"}, {"label": "C", "text": "In the front seat with the airbag disabled"}, {"label": "D", "text": "It does not matter where you install it"}], "correct_answer": "B", "explanation": "The child must be in a rear-facing restraint system because they are under 2 years old, under 40 pounds, and under 3 feet 4 inches tall. A child in a rear-facing restraint system may NOT ride in the front seat of an airbag-equipped vehicle, so the car seat must be installed in the rear seat.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Child Restraint System and Safety Seats", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Children who are under 2 years old, under 40 pounds, and under 3 feet 4 inches tall must be secured in a rear-facing child passenger restraint system.", "A child in a rear-facing child passenger restraint system may not ride in the front seat of an airbag-equipped vehicle."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-manage-your-speed-001", "question_type": "multiple_choice", "question_text": "What is the Basic Speed Law in California?", "choices": [{"label": "A", "text": "You must always drive at the posted speed limit"}, {"label": "B", "text": "You may never drive faster than is safe for the current road conditions"}, {"label": "C", "text": "You must drive at least 10 mph below the posted speed limit"}, {"label": "D", "text": "You may exceed the speed limit by 5 mph in good weather"}], "correct_answer": "B", "explanation": "In California, you may never drive faster than is safe for the current road conditions. This is known as the Basic Speed Law, and it applies regardless of the posted speed limit.", "section_id": "section-08", "topic": "Manage Your Speed", "subtopic": "Basic Speed Law", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["In California, you may never drive faster than is safe for the current road conditions (the Basic Speed Law)."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-aware-of-your-surroundings-018", "question_type": "multiple_choice", "question_text": "At intersections where cross traffic has a red light or stop sign, what should you do?", "choices": [{"label": "A", "text": "Proceed without checking since you have the right-of-way"}, {"label": "B", "text": "Speed up to clear the intersection quickly"}, {"label": "C", "text": "Look both ways before proceeding"}, {"label": "D", "text": "Come to a complete stop even if you have a green light"}], "correct_answer": "C", "explanation": "You should look both ways even at intersections where traffic has a red light or stop sign. Other drivers may not obey the signal, so checking both directions helps you stay safe.", "section_id": "section-08", "topic": "Be Aware of Your Surroundings", "subtopic": "Know What Is at Your Side", "difficulty": "hard", "image_id": null, "image_file": null, "source_facts": ["Look both ways even at intersections where traffic has a red light or stop sign."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-choose-between-hazards-002", "question_type": "multiple_choice", "question_text": "You are on a two-lane road with an oncoming vehicle to the left and a bicyclist ahead to your right. What should you do?", "choices": [{"label": "A", "text": "Drive between the vehicle and the bicyclist at the same time"}, {"label": "B", "text": "Honk your horn to alert the bicyclist and pass immediately"}, {"label": "C", "text": "Take one danger at a time: slow down, let the oncoming vehicle pass, then move left to pass the bicyclist"}, {"label": "D", "text": "Swerve onto the shoulder to avoid both hazards"}], "correct_answer": "C", "explanation": "Instead of driving between the vehicle and the bicyclist, take one danger at a time. Slow down and let the oncoming vehicle pass. When the vehicle has passed, move to the left to allow plenty of space to pass the bicyclist.", "section_id": "section-08", "topic": "Choose Between Hazards", "subtopic": "Choosing Between Hazards", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["In the example with oncoming traffic to the left and a bicyclist ahead to the right, take one danger at a time instead of driving between them.", "Slow down and let the oncoming vehicle pass before moving left to pass the bicyclist."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-do-not-drive-distracted-006", "question_type": "true_false", "question_text": "Driving while using a handheld cell phone is legal as long as you are an adult.", "choices": [{"label": "True", "text": "True"}, {"label": "False", "text": "False"}], "correct_answer": "False", "explanation": "Driving while using a handheld cell phone is unsafe and illegal for all drivers. Adult drivers should only use a cell phone in hands-free mode when necessary.", "section_id": "section-08", "topic": "Do NOT Drive Distracted", "subtopic": "Cell Phones and Texting", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Driving while using a handheld cell phone is unsafe and illegal.", "Adult drivers should only use a cell phone in hands-free mode when necessary."], "validation_status": "fixed", "validation_notes": "Fixed explanation: removed \'not just minors\' phrasing. The manifest states handheld cell phone use is \'unsafe and illegal\' without age qualification. Simplified to match manifest language.", "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-096", "question_type": "scenario", "question_text": "You are driving on a wet road when you suddenly feel your vehicle start to hydroplane. You feel the tires lose contact with the road surface. What should you do?", "choices": [{"label": "A", "text": "Apply the brakes firmly to regain traction"}, {"label": "B", "text": "Accelerate to push through the water"}, {"label": "C", "text": "Slow down gradually and do not use the brakes"}, {"label": "D", "text": "Turn the steering wheel sharply to get off the water"}], "correct_answer": "C", "explanation": "If your vehicle starts to hydroplane, slow down gradually and do not use the brakes. Sudden braking or sharp steering while hydroplaning may cause you to lose control of your vehicle.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Hydroplaning", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If your vehicle starts to hydroplane, slow down gradually.", "If your vehicle starts to hydroplane, do not use the brakes because sudden braking may cause you to lose control."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-098", "question_type": "scenario", "question_text": "You are driving in thick fog on a two-lane highway. Visibility is extremely poor and getting worse. What is the safest course of action?", "choices": [{"label": "A", "text": "Turn on your high-beam headlights and continue driving"}, {"label": "B", "text": "Follow the vehicle ahead of you closely to use their taillights as a guide"}, {"label": "C", "text": "Pull off the road, activate your emergency flashers, and wait for conditions to improve"}, {"label": "D", "text": "Stop in your lane and turn on your parking lights"}], "correct_answer": "C", "explanation": "If fog becomes too thick to drive safely, consider pulling off the road. Activate your emergency flashers and wait for conditions to improve. Never use high-beam headlights in fog as they reflect back and cause glare.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Fog or Heavy Smoke", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If fog becomes too thick to drive safely, consider pulling off the road, activate your emergency flashers, and wait for conditions to improve.", "If you must drive in heavy fog or smoke, use your low-beam headlights because high-beam headlights will reflect back and cause glare."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-aware-of-your-surroundings-010", "question_type": "multiple_choice", "question_text": "What rule should you use to maintain a safe following distance?", "choices": [{"label": "A", "text": "The two-second rule"}, {"label": "B", "text": "The four-second rule"}, {"label": "C", "text": "The three-second rule"}, {"label": "D", "text": "The five-second rule"}], "correct_answer": "C", "explanation": "Use the three-second rule to ensure a safe following distance and avoid a collision. Following other vehicles at a safe distance gives you enough time to react if another driver makes a mistake.", "section_id": "section-08", "topic": "Be Aware of Your Surroundings", "subtopic": "Tailgating (Following Too Closely)", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Use the three-second rule to ensure a safe following distance and avoid a collision."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-003", "question_type": "multiple_choice", "question_text": "Why should you dim your high-beam headlights when an oncoming vehicle approaches?", "choices": [{"label": "A", "text": "To conserve your vehicle\'s battery"}, {"label": "B", "text": "To avoid blinding the driver of the oncoming vehicle"}, {"label": "C", "text": "To signal the other driver to pass"}, {"label": "D", "text": "To reduce wear on your headlight bulbs"}], "correct_answer": "B", "explanation": "Dim your high-beam headlights to avoid blinding the driver of an oncoming vehicle. Blinding another driver creates a dangerous situation for everyone on the road.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Darkness", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["Dim your high-beam headlights to avoid blinding the driver of an oncoming vehicle."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-027", "question_type": "multiple_choice", "question_text": "If you start to skid on a slippery surface, what is the FIRST thing you should do?", "choices": [{"label": "A", "text": "Apply the brakes firmly"}, {"label": "B", "text": "Turn the steering wheel in the opposite direction of the skid"}, {"label": "C", "text": "Slowly remove your foot from the accelerator"}, {"label": "D", "text": "Shift into neutral"}], "correct_answer": "C", "explanation": "If you start to skid, the first step is to slowly remove your foot from the accelerator. This helps reduce speed without causing a sudden change that could worsen the skid.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Slippery Surface Skids", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If you start to skid, slowly remove your foot from the accelerator."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-095", "question_type": "scenario", "question_text": "You are driving on a highway at night during a heavy rainstorm. Visibility has dropped to about 100 feet. What is the safest maximum speed you should drive?", "choices": [{"label": "A", "text": "55 mph, the posted speed limit"}, {"label": "B", "text": "45 mph"}, {"label": "C", "text": "30 mph"}, {"label": "D", "text": "15 mph"}], "correct_answer": "C", "explanation": "If you cannot see farther than 100 feet ahead, it is not safe to drive faster than 30 mph. You should also turn on your windshield wipers, low-beam headlights, and defroster.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Slippery Roads", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If you cannot see farther than 100 feet, it is not safe to drive faster than 30 mph.", "In a heavy rainstorm or snowstorm, you may not be able to see more than 100 feet in front of your vehicle."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-handle-emergencies-008", "question_type": "multiple_choice", "question_text": "If your wheels drift off the pavement, what is the first thing you should do?", "choices": [{"label": "A", "text": "Turn the steering wheel sharply to get back on the road"}, {"label": "B", "text": "Grip the steering wheel firmly and remove your foot from the accelerator"}, {"label": "C", "text": "Apply the brakes hard"}, {"label": "D", "text": "Speed up to regain traction"}], "correct_answer": "B", "explanation": "If your wheels drift off the pavement, grip the steering wheel firmly and remove your foot from the accelerator. Do not turn the steering wheel with too much force.", "section_id": "section-08", "topic": "Know How to Handle Emergencies", "subtopic": "Driving Off the Pavement", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If your wheels drift off the pavement, grip the steering wheel firmly and remove your foot from the accelerator."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-handle-emergencies-038", "question_type": "scenario", "question_text": "You are driving on the highway when you suddenly hear a loud bang and your vehicle starts pulling to the right. You realize you have a tire blowout. What should you do?", "choices": [{"label": "A", "text": "Slam on the brakes to stop as quickly as possible"}, {"label": "B", "text": "Hold the steering wheel with both hands, maintain speed, gradually release the accelerator, and steer in the direction you want to go"}, {"label": "C", "text": "Immediately turn the steering wheel hard to the left to compensate for the pull"}, {"label": "D", "text": "Shift into reverse to slow down quickly"}], "correct_answer": "B", "explanation": "During a tire blowout, hold the steering wheel with both hands, maintain your vehicle speed if possible, gradually release the accelerator, correct the steering to stabilize your vehicle, and look and steer in the direction you want to go. Once stabilized, slow down and pull off the road safely.", "section_id": "section-08", "topic": "Know How to Handle Emergencies", "subtopic": "Tire Blowouts", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["During a tire blowout, hold the steering wheel with both hands.", "During a tire blowout, maintain your vehicle speed if possible and safe.", "During a tire blowout, gradually release the accelerator.", "During a tire blowout, look and steer in the direction you want your vehicle to go."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-aware-of-your-surroundings-006", "question_type": "multiple_choice", "question_text": "How far ahead should you scan the road while driving?", "choices": [{"label": "A", "text": "At least 5 seconds ahead"}, {"label": "B", "text": "At least 10 seconds ahead"}, {"label": "C", "text": "At least 15 seconds ahead"}, {"label": "D", "text": "At least 20 seconds ahead"}], "correct_answer": "B", "explanation": "To give yourself time to react and avoid last-minute moves and hazards, keep your eyes moving and scan the road at least 10 seconds ahead of your vehicle.", "section_id": "section-08", "topic": "Be Aware of Your Surroundings", "subtopic": "Scan Your Surroundings", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["To give yourself time to react and avoid last minute moves and hazards, keep your eyes moving and scan the road at least 10 seconds ahead of your vehicle."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-003", "question_type": "multiple_choice", "question_text": "If your passenger is under what age, can you also receive a ticket if they are not wearing a seat belt?", "choices": [{"label": "A", "text": "12 years old"}, {"label": "B", "text": "14 years old"}, {"label": "C", "text": "16 years old"}, {"label": "D", "text": "18 years old"}], "correct_answer": "C", "explanation": "If your passengers are under 16 years old, you can also get a ticket if they are not wearing their seat belt. The driver is responsible for ensuring underage passengers are properly restrained.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Seat Belts", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If your passenger is under 16 years old, you can also get a ticket if they are not wearing their seat belt."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-032", "question_type": "multiple_choice", "question_text": "Children seated next to a side air bag may be at risk of:", "choices": [{"label": "A", "text": "Minor discomfort only"}, {"label": "B", "text": "Hearing damage"}, {"label": "C", "text": "Serious or fatal injury"}, {"label": "D", "text": "Temporary vision problems"}], "correct_answer": "C", "explanation": "Children seated next to a side air bag may be at risk of serious or fatal injury. The force of a deploying side air bag can be dangerous for small children.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Air Bags", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Children seated next to a side air bag may be at risk of serious or fatal injury."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-carbon-monoxide-003", "question_type": "true_false", "question_text": "It is safe to start your vehicle inside a garage as long as you open the garage door within a few minutes.", "choices": [{"label": "True", "text": "True"}, {"label": "False", "text": "False"}], "correct_answer": "False", "explanation": "Never start your vehicle inside the garage with the door closed. Carbon monoxide is a deadly odorless gas released from a vehicle\'s exhaust pipe.", "section_id": "section-08", "topic": "Be Aware of Carbon Monoxide", "subtopic": "Carbon Monoxide", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Never start your vehicle inside the garage with the door closed."], "validation_status": "fixed", "validation_notes": "Fixed explanation: removed \'even brief exposure in an enclosed space can be extremely dangerous\' as this specific claim is not stated in the manifest. Replaced with manifest-supported facts only.", "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-034", "question_type": "multiple_choice", "question_text": "If your vehicle has four-wheel ABS and you enter a locked wheel skid, what should you do?", "choices": [{"label": "A", "text": "Pump the brakes rapidly"}, {"label": "B", "text": "Remove your foot from the brake pedal completely"}, {"label": "C", "text": "Apply firm pressure on the brake pedal"}, {"label": "D", "text": "Shift into neutral and coast"}], "correct_answer": "C", "explanation": "If your vehicle has four-wheel ABS, apply firm pressure on the brake pedal. The ABS system will prevent the wheels from locking while allowing you to maintain steering control.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Locked Wheel Skids", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If your vehicle has four-wheel ABS, apply firm pressure on the brake pedal."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-aware-of-your-surroundings-030", "question_type": "multiple_choice", "question_text": "How should you check traffic behind you?", "choices": [{"label": "A", "text": "Only by using your rearview mirror"}, {"label": "B", "text": "By using your rearview mirror, side mirrors, and turning your head"}, {"label": "C", "text": "By asking a passenger to look"}, {"label": "D", "text": "Only by turning your head around"}], "correct_answer": "B", "explanation": "Check traffic behind you often by using your rearview mirror, side mirrors, and turning your head. Using all three methods provides the most complete view of what is behind you.", "section_id": "section-08", "topic": "Be Aware of Your Surroundings", "subtopic": "Know What is Behind You", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Check traffic behind you often by using your rearview mirror, side mirrors, and turning your head when you change lanes."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-102", "question_type": "scenario", "question_text": "You are driving in high winds on an interstate while towing a trailer. A strong gust suddenly pushes your vehicle to the side. What should you have done to prepare for this situation?", "choices": [{"label": "A", "text": "Used cruise control to maintain a steady speed"}, {"label": "B", "text": "Reduced speed, maintained a firm grip on the steering wheel, avoided cruise control, and stayed alert for debris"}, {"label": "C", "text": "Increased speed to power through the wind"}, {"label": "D", "text": "Driven in the left lane for more room"}], "correct_answer": "B", "explanation": "In high winds, especially with larger vehicles and trailers, you should reduce your speed for better control, maintain a firm hand position on the steering wheel, avoid cruise control to maintain accelerator control, and stay alert for debris.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "High Winds", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["High winds can be a hazard while driving, especially for larger vehicles such as trucks, campers, and vehicles with trailers.", "In high winds, reduce your speed to give you better control and more time to react to gusts.", "In high winds, maintain a firm hand position on the steering wheel because gusts are unpredictable.", "In high winds, do not use cruise control so you can maintain maximum control of the accelerator if a gust occurs.", "In high winds, be alert and look ahead for debris and other road hazards."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-033", "question_type": "multiple_choice", "question_text": "It is illegal to leave a child unattended in a vehicle if the child is what age or younger?", "choices": [{"label": "A", "text": "4 years old or younger"}, {"label": "B", "text": "5 years old or younger"}, {"label": "C", "text": "6 years old or younger"}, {"label": "D", "text": "8 years old or younger"}], "correct_answer": "C", "explanation": "It is illegal to leave a child who is six years old or younger unattended in a vehicle. This law helps protect young children from heat-related dangers and other risks.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Unattended Children and Pets", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["It is illegal to leave a child who is six years old or younger unattended in a vehicle."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-handle-emergencies-017", "question_type": "multiple_choice", "question_text": "If your vehicle becomes disabled on the freeway, what should you do first?", "choices": [{"label": "A", "text": "Turn on your high-beam headlights"}, {"label": "B", "text": "Safely pull over to the right shoulder"}, {"label": "C", "text": "Stop in the lane and wait for help"}, {"label": "D", "text": "Pull over to the left shoulder"}], "correct_answer": "B", "explanation": "If your vehicle stops working on the freeway, you should safely pull over to the right shoulder.", "section_id": "section-08", "topic": "Know How to Handle Emergencies", "subtopic": "If Your Vehicle Becomes Disabled on the Freeway", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["If your vehicle stops working on the freeway, safely pull over to the right shoulder."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-do-not-drive-distracted-014", "question_type": "multiple_choice", "question_text": "Under what circumstance may a minor use a cell phone while driving?", "choices": [{"label": "A", "text": "When using a hands-free device"}, {"label": "B", "text": "When making a call for emergency assistance"}, {"label": "C", "text": "When the phone is mounted on the dashboard"}, {"label": "D", "text": "When stopped at a red light"}], "correct_answer": "B", "explanation": "The only exception for minors using a cell phone while driving is to make a call for emergency assistance.", "section_id": "section-08", "topic": "Do NOT Drive Distracted", "subtopic": "Minors and Cell Phones", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Minors may use a cell phone to make a call for emergency assistance."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-100", "question_type": "scenario", "question_text": "You are approaching a flooded section of road. The water appears deep and you cannot tell how deep it actually is. What should you do?", "choices": [{"label": "A", "text": "Drive through slowly in low gear"}, {"label": "B", "text": "Drive through quickly so your vehicle does not stall"}, {"label": "C", "text": "Find another route to avoid the flooded area"}, {"label": "D", "text": "Follow the vehicle ahead of you through the water"}], "correct_answer": "C", "explanation": "It may not be possible to determine the depth of a flood by looking. If the water is deep, the road may be too dangerous to cross. It is best to find another route.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Flooded Roads", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["It may not be possible to determine the depth of a flood by looking.", "If the water is deep, the road may be too dangerous to cross, so it is best to find another route."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-099", "question_type": "scenario", "question_text": "You are driving on a highway when a law enforcement officer ahead turns on their emergency lights and begins slowly weaving across all lanes. What should you do?", "choices": [{"label": "A", "text": "Move to the right lane and continue driving at the speed limit"}, {"label": "B", "text": "Pull over to the shoulder immediately and stop"}, {"label": "C", "text": "Turn on your emergency flashers, slowly decrease your speed to match the officer\'s speed, and do not pass the patrol vehicle"}, {"label": "D", "text": "Change lanes quickly to pass the officer before they block your lane"}], "correct_answer": "C", "explanation": "During a traffic break, turn on your emergency flashers to warn other drivers, slowly decrease your speed to match the officer\'s speed, keep a safe distance, and do not drive past the patrol vehicle.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Law Enforcement Traffic Breaks", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["During a traffic break, turn on your emergency flashers to warn other drivers.", "During a traffic break, slowly decrease your speed to the same speed as the officer and do not brake suddenly unless necessary to avoid a collision.", "Do not drive past the patrol vehicle during a traffic break."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-021", "question_type": "multiple_choice", "question_text": "What is a skid?", "choices": [{"label": "A", "text": "When the engine stalls while driving"}, {"label": "B", "text": "When one or more tires lose traction with the road and the vehicle starts to slip"}, {"label": "C", "text": "When the brakes lock up and the vehicle stops immediately"}, {"label": "D", "text": "When the steering wheel becomes difficult to turn"}], "correct_answer": "B", "explanation": "A skid is when one or more of the tires lose traction with the road and the vehicle starts to slip. During a skid, you may not be able to control your vehicle.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Skids", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["A skid is when one or more of the tires lose traction with the road and the vehicle starts to slip.", "During a skid, you may not be able to control your vehicle."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-017", "question_type": "true_false", "question_text": "During sun glare conditions, you should be extra aware of pedestrians because you may have difficulty seeing them.", "choices": [{"label": "True", "text": "True"}, {"label": "False", "text": "False"}], "correct_answer": "True", "explanation": "During sun glare, be aware of pedestrians because you may have difficulty seeing them. Glare can significantly reduce your ability to spot people crossing the road.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Sun Glare", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["During sun glare, be aware of pedestrians because you may have difficulty seeing them."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-do-not-drive-distracted-004", "question_type": "multiple_choice", "question_text": "You should avoid distractions while driving because they:", "choices": [{"label": "A", "text": "Can increase fuel consumption"}, {"label": "B", "text": "Are illegal in all cases"}, {"label": "C", "text": "Can prevent you from driving safely"}, {"label": "D", "text": "Only affect new drivers"}], "correct_answer": "C", "explanation": "You should avoid distractions while you drive because they can prevent you from driving safely and reacting to hazards on the road.", "section_id": "section-08", "topic": "Do NOT Drive Distracted", "subtopic": "Common Distractions", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["Avoid distractions while you drive."], "validation_status": "fixed", "validation_notes": "Minor fix: the explanation adds \'and reacting to hazards on the road\' which is not directly stated in the Common Distractions subtopic of the manifest. The manifest simply says \'Avoid distractions while you drive.\' However, the correct answer C (\'Can prevent you from driving safely\') is a reasonable inference from the instruction to avoid distractions. The explanation\'s additional detail about \'reacting to hazards\' is not directly supported by this subtopic but is a general driving principle found elsewhere in the manifest. Keeping the question as-is since the correct answer is clearly supported.", "_image_data_uri": null}, {"question_id": "q-sec08-handle-emergencies-012", "question_type": "multiple_choice", "question_text": "In extreme heat, which of the following should you do to prevent your vehicle from overheating?", "choices": [{"label": "A", "text": "Turn the air conditioner to maximum"}, {"label": "B", "text": "Drive at high speeds to increase airflow"}, {"label": "C", "text": "Turn off the air conditioner"}, {"label": "D", "text": "Open the radiator cap to release pressure"}], "correct_answer": "C", "explanation": "In extreme heat, you should turn off the air conditioner to reduce the load on your engine and help prevent overheating. Also watch the temperature gauge and avoid driving at high speeds for long periods.", "section_id": "section-08", "topic": "Know How to Handle Emergencies", "subtopic": "Overheating Conditions", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["In extreme heat, turn off the air conditioner."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-aware-of-your-surroundings-001", "question_type": "multiple_choice", "question_text": "Why is it important to know what is around your vehicle while driving?", "choices": [{"label": "A", "text": "To find the fastest route to your destination"}, {"label": "B", "text": "To make good decisions and react to hazards on the road"}, {"label": "C", "text": "To avoid getting a traffic ticket"}, {"label": "D", "text": "To keep up with the speed of other vehicles"}], "correct_answer": "B", "explanation": "To drive safely, you need to know what is around you. This helps you make good decisions and react to hazards on the road.", "section_id": "section-08", "topic": "Be Aware of Your Surroundings", "subtopic": "Areas Around Your Vehicle", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["To drive safely, you need to know what is around you to make good decisions and react to hazards on the road."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-062", "question_type": "multiple_choice", "question_text": "If stuck in the snow or mud, what is the first thing you should do?", "choices": [{"label": "A", "text": "Spin the wheels at high speed to create friction"}, {"label": "B", "text": "Shift into a low gear and keep the front wheels straight"}, {"label": "C", "text": "Turn the steering wheel back and forth rapidly"}, {"label": "D", "text": "Apply the emergency brake"}], "correct_answer": "B", "explanation": "If stuck in the snow or mud, shift into a low gear and keep the front wheels straight. This gives you the best traction to move the vehicle forward.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Stuck in Snow or Mud", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If stuck in the snow or mud, shift into a low gear and keep the front wheels straight."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-handle-emergencies-023", "question_type": "multiple_choice", "question_text": "When does the CHP Freeway Service Patrol (FSP) provide free emergency roadside services?", "choices": [{"label": "A", "text": "24 hours a day, 7 days a week"}, {"label": "B", "text": "During commute times in certain areas"}, {"label": "C", "text": "Only on weekends"}, {"label": "D", "text": "Only at night"}], "correct_answer": "B", "explanation": "During commute times, the CHP Freeway Service Patrol (FSP) provides free emergency roadside services in certain areas.", "section_id": "section-08", "topic": "Know How to Handle Emergencies", "subtopic": "California Highway Patrol (CHP) Freeway Service Patrol (FSP)", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["During commute times, the CHP Freeway Service Patrol (FSP) provides free emergency roadside services in certain areas."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-new-technology-002", "question_type": "multiple_choice", "question_text": "What should you be aware of regarding new vehicle technology on the road?", "choices": [{"label": "A", "text": "Self-driving vehicles are not allowed on California roads"}, {"label": "B", "text": "More self-driving vehicles and vehicles with advanced driver assistance systems (ADAS) will be on the road, and they may behave differently than human drivers"}, {"label": "C", "text": "All new vehicles are fully autonomous and do not need a driver"}, {"label": "D", "text": "ADAS technology only affects commercial trucks"}], "correct_answer": "B", "explanation": "Vehicle technology is always advancing, and we will see more self-driving vehicles and vehicles with ADAS on the road. These vehicles may respond to road situations differently than a human driver would.", "section_id": "section-08", "topic": "Be Familiar with New Technology", "subtopic": "New Technology", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Vehicle technology is always advancing, including more self-driving vehicles and vehicles with advanced driver assistance systems (ADAS) on the road.", "Vehicles with these systems may respond to road situations differently than a human driver would."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-015", "question_type": "true_false", "question_text": "A child in a rear-facing child passenger restraint system may ride in the front seat of an airbag-equipped vehicle.", "choices": [{"label": "True", "text": "True"}, {"label": "False", "text": "False"}], "correct_answer": "False", "explanation": "A child in a rear-facing child passenger restraint system may NOT ride in the front seat of an airbag-equipped vehicle. The airbag could cause serious injury to a child in a rear-facing seat.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Child Restraint System and Safety Seats", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["A child in a rear-facing child passenger restraint system may not ride in the front seat of an airbag-equipped vehicle."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-aware-of-your-surroundings-021", "question_type": "multiple_choice", "question_text": "How should you check your blind spots?", "choices": [{"label": "A", "text": "Use only your rearview mirror"}, {"label": "B", "text": "Turn your whole body around to look"}, {"label": "C", "text": "Look over your right and left shoulders out of your side windows, turning only your head"}, {"label": "D", "text": "Rely on your side mirrors alone"}], "correct_answer": "C", "explanation": "To check your blind spots, look over your right and left shoulders out of your side windows. Only turn your head when you look. Do not turn your whole body or steering wheel.", "section_id": "section-08", "topic": "Be Aware of Your Surroundings", "subtopic": "Blind Spots", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["To check your blind spots, look over your right and left shoulders out of your side windows.", "Only turn your head when you look over your shoulder; do not turn your whole body or steering wheel."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-014", "question_type": "multiple_choice", "question_text": "Children who are under 2 years old, under 40 pounds, and under 3 feet 4 inches tall must be secured in what type of restraint system?", "choices": [{"label": "A", "text": "A forward-facing child passenger restraint system"}, {"label": "B", "text": "A booster seat with a lap belt"}, {"label": "C", "text": "A rear-facing child passenger restraint system"}, {"label": "D", "text": "A regular safety belt"}], "correct_answer": "C", "explanation": "Children who are under 2 years old, under 40 pounds, and under 3 feet 4 inches tall must be secured in a rear-facing child passenger restraint system.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Child Restraint System and Safety Seats", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Children who are under 2 years old, under 40 pounds, and under 3 feet 4 inches tall must be secured in a rear-facing child passenger restraint system."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-manage-your-speed-007", "question_type": "multiple_choice", "question_text": "Unless otherwise posted, what is the ideal maximum speed limit on most California highways?", "choices": [{"label": "A", "text": "55 mph"}, {"label": "B", "text": "60 mph"}, {"label": "C", "text": "65 mph"}, {"label": "D", "text": "70 mph"}], "correct_answer": "C", "explanation": "Unless otherwise posted, the ideal maximum speed limit on most California highways is 65 mph.", "section_id": "section-08", "topic": "Manage Your Speed", "subtopic": "Basic Speed Law", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Unless otherwise posted, the ideal maximum speed limit on most California highways is 65 mph."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-097", "question_type": "scenario", "question_text": "You are driving on an icy mountain road and your vehicle begins to skid. Your vehicle does NOT have ABS. What is the correct sequence of actions?", "choices": [{"label": "A", "text": "Apply the brakes firmly, then turn the steering wheel in the opposite direction of the skid"}, {"label": "B", "text": "Slowly remove your foot from the accelerator, do not use the brakes, turn the steering wheel in the direction of the skid, and try to get a wheel on dry pavement"}, {"label": "C", "text": "Shift into neutral, apply the emergency brake, and steer straight ahead"}, {"label": "D", "text": "Press the accelerator to power out of the skid and steer toward the shoulder"}], "correct_answer": "B", "explanation": "If you start to skid on a slippery surface: (1) slowly remove your foot from the accelerator, (2) do not use the brakes, (3) turn the steering wheel in the direction of the skid, and (4) try to get a wheel on dry pavement.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Slippery Surface Skids", "difficulty": "hard", "image_id": null, "image_file": null, "source_facts": ["If you start to skid, slowly remove your foot from the accelerator.", "If you start to skid, do not use the brakes.", "If you start to skid, turn the steering wheel in the direction of the skid.", "If you start to skid, try to get a wheel on dry pavement."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-016", "question_type": "multiple_choice", "question_text": "Children who are under 8 years old or less than 4 feet 9 inches tall must be secured in a child passenger restraint system placed where?", "choices": [{"label": "A", "text": "In the front seat"}, {"label": "B", "text": "In any seat of the vehicle"}, {"label": "C", "text": "In a rear seat"}, {"label": "D", "text": "In the middle seat only"}], "correct_answer": "C", "explanation": "Children who are under 8 years old, or who are less than 4 feet 9 inches tall, must be secured in a child passenger restraint system in a rear seat.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Child Restraint System and Safety Seats", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Children who are under 8 years old, or who are less than 4 feet 9 inches tall, must be secured in a child passenger restraint system in a rear seat."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-023", "question_type": "multiple_choice", "question_text": "At what age or height may a child use a properly secured safety belt instead of a child passenger restraint system?", "choices": [{"label": "A", "text": "6 years old or at least 4 feet tall"}, {"label": "B", "text": "8 years old or at least 4 feet 9 inches tall"}, {"label": "C", "text": "10 years old or at least 5 feet tall"}, {"label": "D", "text": "7 years old or at least 4 feet 5 inches tall"}], "correct_answer": "B", "explanation": "Children who are 8 years old or older, or at least 4 feet 9 inches tall, may use a properly secured safety belt that meets federal standards instead of a child passenger restraint system.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Child Restraint System and Safety Seats", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Children who are 8 years old or older, or at least 4 feet 9 inches tall, may use a properly secured safety belt that meets federal standards."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-choose-between-hazards-003", "question_type": "multiple_choice", "question_text": "When passing a bicyclist, you should allow at least how many feet of space?", "choices": [{"label": "A", "text": "1 foot"}, {"label": "B", "text": "2 feet"}, {"label": "C", "text": "3 feet"}, {"label": "D", "text": "5 feet"}], "correct_answer": "C", "explanation": "You should allow at least three feet of space when passing a bicyclist. This provides enough room for the bicyclist\'s safety and accounts for any unexpected movements.", "section_id": "section-08", "topic": "Choose Between Hazards", "subtopic": "Choosing Between Hazards", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Allow at least three feet of space when passing the bicyclist in the example."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-do-not-drive-distracted-005", "question_type": "multiple_choice", "question_text": "What is the main source of distracted driving?", "choices": [{"label": "A", "text": "Eating and drinking"}, {"label": "B", "text": "Talking to passengers"}, {"label": "C", "text": "Cell phones"}, {"label": "D", "text": "Adjusting the radio"}], "correct_answer": "C", "explanation": "Cell phones are the main source of distracted driving. Driving while using a handheld cell phone is unsafe and illegal.", "section_id": "section-08", "topic": "Do NOT Drive Distracted", "subtopic": "Cell Phones and Texting", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["Cell phones are the main source of distracted driving."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-aware-of-your-surroundings-012", "question_type": "multiple_choice", "question_text": "What should you do if a tailgater is behind you?", "choices": [{"label": "A", "text": "Speed up to create distance"}, {"label": "B", "text": "Brake suddenly to force them to slow down"}, {"label": "C", "text": "Maintain your course and speed, then when safe merge right to let the tailgater pass"}, {"label": "D", "text": "Move to the left lane immediately"}], "correct_answer": "C", "explanation": "If a tailgater is behind you, maintain your course and speed. Then, when safe to do so, merge right to change into another lane and allow the tailgater to pass.", "section_id": "section-08", "topic": "Be Aware of Your Surroundings", "subtopic": "Tailgating (Following Too Closely)", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If a tailgater is behind you, maintain your course and speed, then when safe merge right to let the tailgater pass."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-aware-of-your-surroundings-016", "question_type": "multiple_choice", "question_text": "When vehicles are entering the freeway, what should you do even if you have the right-of-way?", "choices": [{"label": "A", "text": "Speed up so they can merge behind you"}, {"label": "B", "text": "Flash your headlights to warn them"}, {"label": "C", "text": "Make space for them, be ready for rapid changes, and watch for their signals"}, {"label": "D", "text": "Honk your horn to alert them of your position"}], "correct_answer": "C", "explanation": "You should make space for vehicles entering freeways even if you have the right-of-way. Be ready for rapid changes and watch for signals from other drivers.", "section_id": "section-08", "topic": "Be Aware of Your Surroundings", "subtopic": "Know What Is at Your Side", "difficulty": "hard", "image_id": null, "image_file": null, "source_facts": ["Make space for vehicles entering freeways even if you have the right-of-way, and be ready for rapid changes and watch for signals from other drivers."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-manage-your-speed-010", "question_type": "scenario", "question_text": "You are towing a trailer on a two-lane undivided highway with no posted speed limit signs. What is the maximum speed you should drive?", "choices": [{"label": "A", "text": "65 mph, because that is the maximum for most highways"}, {"label": "B", "text": "60 mph"}, {"label": "C", "text": "55 mph, because the default maximum for vehicles towing trailers is 55 mph"}, {"label": "D", "text": "45 mph"}], "correct_answer": "C", "explanation": "Unless otherwise posted, the ideal maximum speed limit for vehicles towing trailers is 55 mph. Since there is no posted speed limit sign, the default 55 mph limit applies.", "section_id": "section-08", "topic": "Manage Your Speed", "subtopic": "Basic Speed Law", "difficulty": "hard", "image_id": null, "image_file": null, "source_facts": ["Unless otherwise posted, the ideal maximum speed limit is 55 mph on a two-lane undivided highway and for vehicles towing trailers."], "validation_status": "fixed", "validation_notes": "Fixed: Original scenario described a highway posted at 70 mph, which conflicted with the source fact\'s \'unless otherwise posted\' qualifier. A road posted at 70 mph IS \'otherwise posted,\' making the original correct answer ambiguous per the manifest. Rephrased scenario to use an unposted two-lane undivided highway where the 55 mph default clearly applies. Also updated choices and explanation to match the corrected scenario.", "_image_data_uri": null}, {"question_id": "q-sec08-manage-your-speed-011", "question_type": "scenario", "question_text": "You are driving on a California highway with a posted speed limit of 65 mph. It begins to rain heavily and visibility drops significantly. What should you do?", "choices": [{"label": "A", "text": "Continue driving at 65 mph since that is the posted limit"}, {"label": "B", "text": "Slow down to a speed that is safe for the current conditions, even if it is well below 65 mph"}, {"label": "C", "text": "Speed up to get out of the rain faster"}, {"label": "D", "text": "Maintain 65 mph but turn on your hazard lights"}], "correct_answer": "B", "explanation": "Under the Basic Speed Law, you may never drive faster than is safe for current road conditions. Weather conditions like heavy rain should cause you to reduce your speed regardless of the posted speed limit.", "section_id": "section-08", "topic": "Manage Your Speed", "subtopic": "Basic Speed Law", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["In California, you may never drive faster than is safe for the current road conditions (the Basic Speed Law).", "Regardless of the posted speed limit, your speed should depend on weather (rain, fog, snow, wind, or dust)."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-001", "question_type": "multiple_choice", "question_text": "When driving at night on open country roads or dark city streets, which headlights should you use?", "choices": [{"label": "A", "text": "Parking lights only"}, {"label": "B", "text": "Low-beam headlights"}, {"label": "C", "text": "High-beam headlights"}, {"label": "D", "text": "Fog lights only"}], "correct_answer": "C", "explanation": "When driving at night, use your high-beam headlights on open country roads or dark city streets to maximize your visibility.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Darkness", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["When driving at night, use your high-beam headlights on open country roads or dark city streets."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-006", "question_type": "multiple_choice", "question_text": "When driving in the rain at night, which headlights should you use?", "choices": [{"label": "A", "text": "High-beam headlights"}, {"label": "B", "text": "Low-beam headlights"}, {"label": "C", "text": "Parking lights only"}, {"label": "D", "text": "No headlights are needed if streetlights are on"}], "correct_answer": "B", "explanation": "When it is raining, use your low-beam headlights. High-beam headlights can reflect off the rain and reduce your visibility.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Darkness", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["When it is raining, use your low-beam headlights."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-handle-emergencies-003", "question_type": "multiple_choice", "question_text": "During a tire blowout, you should:", "choices": [{"label": "A", "text": "Abruptly remove your foot from the accelerator"}, {"label": "B", "text": "Steer in the opposite direction of the blowout"}, {"label": "C", "text": "Gradually release the accelerator"}, {"label": "D", "text": "Shift into neutral immediately"}], "correct_answer": "C", "explanation": "During a tire blowout, you should gradually release the accelerator. Abruptly removing your foot from the accelerator can result in loss of control.", "section_id": "section-08", "topic": "Know How to Handle Emergencies", "subtopic": "Tire Blowouts", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["During a tire blowout, gradually release the accelerator."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-aware-of-your-surroundings-023", "question_type": "multiple_choice", "question_text": "Which of the following is NOT a situation where you should check your blind spots?", "choices": [{"label": "A", "text": "Before changing lanes"}, {"label": "B", "text": "Before adjusting your rearview mirror"}, {"label": "C", "text": "Before merging with traffic"}, {"label": "D", "text": "Before turning at an intersection"}], "correct_answer": "B", "explanation": "You should check your blind spots before changing lanes, turning at an intersection, merging with traffic, backing up, leaving a parking space, parallel parking, pulling out from the curb, and opening your car door. Adjusting your rearview mirror is not one of the listed situations.", "section_id": "section-08", "topic": "Be Aware of Your Surroundings", "subtopic": "Blind Spots", "difficulty": "hard", "image_id": null, "image_file": null, "source_facts": ["Check your blind spots before you change lanes.", "Check your blind spots before you turn at an intersection.", "Check your blind spots before you merge with traffic."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-008", "question_type": "multiple_choice", "question_text": "At night, which of the following road users are much harder to see?", "choices": [{"label": "A", "text": "Other cars with headlights on"}, {"label": "B", "text": "Large commercial trucks"}, {"label": "C", "text": "Motorcycles, pedestrians, and bicyclists"}, {"label": "D", "text": "Emergency vehicles with flashing lights"}], "correct_answer": "C", "explanation": "At night, motorcycles, pedestrians, and bicyclists are much harder to see because they are smaller and may not have bright lighting.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Darkness", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["At night, motorcycles, pedestrians, and bicyclists are much harder to see."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-043", "question_type": "multiple_choice", "question_text": "On a wet road, by how much should you reduce your speed?", "choices": [{"label": "A", "text": "1 to 3 mph"}, {"label": "B", "text": "5 to 10 mph"}, {"label": "C", "text": "15 to 20 mph"}, {"label": "D", "text": "Reduce by half"}], "correct_answer": "B", "explanation": "On a wet road, reduce your speed by 5 to 10 mph. This gives you better traction and more time to react to hazards.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Slippery Roads", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["On a wet road, reduce your speed by 5 to 10 mph."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-044", "question_type": "multiple_choice", "question_text": "On packed snow, by how much should you reduce your speed?", "choices": [{"label": "A", "text": "By 5 to 10 mph"}, {"label": "B", "text": "By one-third"}, {"label": "C", "text": "By half"}, {"label": "D", "text": "To no more than 5 mph"}], "correct_answer": "C", "explanation": "On packed snow, reduce your speed by half. Packed snow significantly reduces traction, requiring a much greater speed reduction than wet roads.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Slippery Roads", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["On packed snow, reduce your speed by half."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-008", "question_type": "multiple_choice", "question_text": "How should you wear the shoulder harness of your seat belt?", "choices": [{"label": "A", "text": "Under your arm for comfort"}, {"label": "B", "text": "Behind your back so it does not restrict movement"}, {"label": "C", "text": "Across your shoulder and chest with little to no slack"}, {"label": "D", "text": "Loosely draped over one shoulder"}], "correct_answer": "C", "explanation": "You should wear the shoulder harness across your shoulder and chest with little to no slack. Do not wear it under your arm or behind your back, as these positions reduce its effectiveness.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Seat Belts", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Wear the shoulder harness across your shoulder and chest with little to no slack, and do not wear it under your arm or behind your back."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-handle-emergencies-011", "question_type": "multiple_choice", "question_text": "Why should you NOT turn your steering wheel with too much force when returning to the pavement after drifting off the road?", "choices": [{"label": "A", "text": "It may damage your tires"}, {"label": "B", "text": "It may cause you to drive into oncoming traffic"}, {"label": "C", "text": "It may cause your engine to stall"}, {"label": "D", "text": "It may trigger your airbag"}], "correct_answer": "B", "explanation": "Pulling or turning your steering wheel with too much force when returning to the pavement may cause you to drive into oncoming traffic.", "section_id": "section-08", "topic": "Know How to Handle Emergencies", "subtopic": "Driving Off the Pavement", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Do not pull or turn your steering wheel with too much force when returning to the pavement; it may cause you to drive into oncoming traffic."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-079", "question_type": "multiple_choice", "question_text": "If you must drive in heavy fog or smoke, which headlights should you use?", "choices": [{"label": "A", "text": "High-beam headlights"}, {"label": "B", "text": "Low-beam headlights"}, {"label": "C", "text": "Parking lights only"}, {"label": "D", "text": "Fog lights only"}], "correct_answer": "B", "explanation": "If you must drive in heavy fog or smoke, use your low-beam headlights. High-beam headlights will reflect back and cause glare, making visibility even worse.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Fog or Heavy Smoke", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If you must drive in heavy fog or smoke, use your low-beam headlights because high-beam headlights will reflect back and cause glare."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-do-not-drive-distracted-008", "question_type": "true_false", "question_text": "It is legal to send or read text messages while driving as long as you are stopped at a red light.", "choices": [{"label": "True", "text": "True"}, {"label": "False", "text": "False"}], "correct_answer": "False", "explanation": "Do not send or read text messages or emails while driving.", "section_id": "section-08", "topic": "Do NOT Drive Distracted", "subtopic": "Cell Phones and Texting", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Do not send or read text messages or emails while driving."], "validation_status": "fixed", "validation_notes": "Fixed explanation: removed the claim \'The law applies while operating a vehicle, including at stoplights\' as this specific detail about stoplights is not stated in the manifest. The manifest only says \'Do not send or read text messages or emails while driving.\' The question itself is still valid since the manifest prohibits texting while driving without exceptions.", "_image_data_uri": null}, {"question_id": "q-sec08-carbon-monoxide-002", "question_type": "multiple_choice", "question_text": "Carbon monoxide is dangerous because it is:", "choices": [{"label": "A", "text": "A deadly gas with a strong smell"}, {"label": "B", "text": "A deadly odorless gas"}, {"label": "C", "text": "A visible gas that causes respiratory issues"}, {"label": "D", "text": "A gas that only affects children"}], "correct_answer": "B", "explanation": "Carbon monoxide is a deadly odorless gas released from a vehicle\'s exhaust pipe. Because it is odorless, you cannot smell it, making it especially dangerous.", "section_id": "section-08", "topic": "Be Aware of Carbon Monoxide", "subtopic": "Carbon Monoxide", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["Carbon monoxide is a deadly odorless gas released from a vehicle\'s exhaust pipe."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-handle-emergencies-040", "question_type": "scenario", "question_text": "You are driving on a rural road when your right wheels drift off the pavement onto the gravel shoulder. What should you do?", "choices": [{"label": "A", "text": "Jerk the steering wheel to the left to get back on the road"}, {"label": "B", "text": "Accelerate to regain traction"}, {"label": "C", "text": "Grip the steering wheel firmly, remove your foot from the accelerator, brake gently, check for traffic behind you, and carefully steer back onto the pavement"}, {"label": "D", "text": "Stop immediately and call for assistance"}], "correct_answer": "C", "explanation": "If your wheels drift off the pavement, grip the steering wheel firmly, remove your foot from the accelerator, brake gently, check for traffic behind you, and carefully steer back onto the pavement. Do not turn the steering wheel with too much force as it may cause you to drive into oncoming traffic.", "section_id": "section-08", "topic": "Know How to Handle Emergencies", "subtopic": "Driving Off the Pavement", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If your wheels drift off the pavement, grip the steering wheel firmly and remove your foot from the accelerator.", "If your wheels drift off the pavement, brake gently.", "If your wheels drift off the pavement, check for traffic behind you.", "If your wheels drift off the pavement, carefully steer back onto the pavement.", "Do not pull or turn your steering wheel with too much force when returning to the pavement; it may cause you to drive into oncoming traffic."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-aware-of-your-surroundings-008", "question_type": "multiple_choice", "question_text": "Why does tailgating make driving more dangerous?", "choices": [{"label": "A", "text": "It wastes fuel"}, {"label": "B", "text": "It makes it harder to see the road ahead because the vehicle in front blocks your view"}, {"label": "C", "text": "It is only dangerous in bad weather"}, {"label": "D", "text": "It causes your engine to overheat"}], "correct_answer": "B", "explanation": "Tailgating makes it harder to see the road ahead because the vehicle in front of you blocks your view, and you will not have enough time to react if the driver in front of you brakes suddenly.", "section_id": "section-08", "topic": "Be Aware of Your Surroundings", "subtopic": "Tailgating (Following Too Closely)", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["Tailgating makes it harder to see the road ahead because the vehicle in front of you blocks your view."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-029", "question_type": "multiple_choice", "question_text": "When you start to skid on a slippery surface, which direction should you turn the steering wheel?", "choices": [{"label": "A", "text": "In the opposite direction of the skid"}, {"label": "B", "text": "In the direction of the skid"}, {"label": "C", "text": "Hold it perfectly straight"}, {"label": "D", "text": "Rapidly turn back and forth"}], "correct_answer": "B", "explanation": "If you start to skid, turn the steering wheel in the direction of the skid. This helps you regain traction and control of your vehicle.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Slippery Surface Skids", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If you start to skid, turn the steering wheel in the direction of the skid."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-045", "question_type": "multiple_choice", "question_text": "On icy roads, what is the maximum speed you should drive?", "choices": [{"label": "A", "text": "15 mph"}, {"label": "B", "text": "10 mph"}, {"label": "C", "text": "5 mph"}, {"label": "D", "text": "25 mph"}], "correct_answer": "C", "explanation": "On ice, reduce your speed to no more than 5 mph. Ice provides the least traction of all slippery road conditions and requires the slowest speeds.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Slippery Roads", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["On ice, reduce your speed to no more than 5 mph."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-078", "question_type": "multiple_choice", "question_text": "What is the best thing to do if you are facing heavy fog or smoke?", "choices": [{"label": "A", "text": "Drive with your high-beam headlights on"}, {"label": "B", "text": "Avoid driving and consider postponing your trip until conditions clear"}, {"label": "C", "text": "Follow the vehicle ahead closely so you can see their taillights"}, {"label": "D", "text": "Use your parking lights only"}], "correct_answer": "B", "explanation": "It is best to avoid driving in heavy fog or smoke. Consider postponing your trip until the fog clears rather than risking reduced visibility.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Fog or Heavy Smoke", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["It is best to avoid driving in heavy fog or smoke and consider postponing your trip until conditions clear."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-004", "question_type": "multiple_choice", "question_text": "Wearing the lap belt and shoulder harness of a seat belt will:", "choices": [{"label": "A", "text": "Guarantee you will not be injured in a collision"}, {"label": "B", "text": "Increase your chance of survival in most types of collisions"}, {"label": "C", "text": "Only help in head-on collisions"}, {"label": "D", "text": "Prevent all vehicle damage in a collision"}], "correct_answer": "B", "explanation": "Wearing the lap belt and shoulder harness increases your chance of survival in most types of collisions. While they cannot guarantee injury-free outcomes, they significantly improve safety.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Seat Belts", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["Wearing the lap belt and shoulder harness increases your chance of survival in most types of collisions."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-choose-between-hazards-006", "question_type": "scenario", "question_text": "You are driving on a narrow two-lane road. A large truck is approaching from the opposite direction while a bicyclist is riding ahead of you on the right side of the road. What should you do?", "choices": [{"label": "A", "text": "Speed up to pass the bicyclist before the truck reaches you"}, {"label": "B", "text": "Squeeze between the truck and the bicyclist"}, {"label": "C", "text": "Slow down, let the truck pass, then move to the left to pass the bicyclist with at least three feet of space"}, {"label": "D", "text": "Honk your horn at the bicyclist to move off the road"}], "correct_answer": "C", "explanation": "When faced with hazards on both sides, take one danger at a time. Slow down and let the oncoming truck pass first, then move to the left to safely pass the bicyclist with at least three feet of space.", "section_id": "section-08", "topic": "Choose Between Hazards", "subtopic": "Choosing Between Hazards", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["When dangers are on both sides of the road at the same time, give more space to the most dangerous situation.", "In the example with oncoming traffic to the left and a bicyclist ahead to the right, take one danger at a time instead of driving between them.", "Slow down and let the oncoming vehicle pass before moving left to pass the bicyclist.", "Allow at least three feet of space when passing the bicyclist in the example."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-handle-emergencies-001", "question_type": "true_false", "question_text": "If you have a tire blowout, you should immediately slam on the brakes to stop your vehicle as quickly as possible.", "choices": [{"label": "True", "text": "True"}, {"label": "False", "text": "False"}], "correct_answer": "False", "explanation": "If you have a tire blowout, do not panic or overreact. Suddenly braking can result in a loss of control over the vehicle. Instead, hold the steering wheel firmly and gradually release the accelerator.", "section_id": "section-08", "topic": "Know How to Handle Emergencies", "subtopic": "Tire Blowouts", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["If you have a tire blowout, do not panic or overreact.", "Suddenly braking or abruptly removing your foot from the accelerator during a blowout can result in loss of control."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-do-not-drive-distracted-007", "question_type": "multiple_choice", "question_text": "What should you do if your cell phone rings while you are driving?", "choices": [{"label": "A", "text": "Answer it quickly and keep the conversation short"}, {"label": "B", "text": "Let the call go to voicemail"}, {"label": "C", "text": "Use the speakerphone while holding it"}, {"label": "D", "text": "Hand the phone to a passenger"}], "correct_answer": "B", "explanation": "Do not answer your cell phone if it rings while driving. Let the call go to voicemail. If you must return or make a call, pull safely off the road.", "section_id": "section-08", "topic": "Do NOT Drive Distracted", "subtopic": "Cell Phones and Texting", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Do not answer your cell phone if it rings; let the call go to voicemail.", "If you must return or make a call, pull safely off the road."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-aware-of-your-surroundings-011", "question_type": "multiple_choice", "question_text": "What should you do if a vehicle merges in front of you too closely?", "choices": [{"label": "A", "text": "Honk your horn and flash your headlights"}, {"label": "B", "text": "Speed up to maintain your original following distance"}, {"label": "C", "text": "Take your foot off the accelerator to create space"}, {"label": "D", "text": "Immediately apply your brakes"}], "correct_answer": "C", "explanation": "If a vehicle merges in front of you too closely, take your foot off the accelerator. This creates space between you and the vehicle ahead without requiring sudden braking.", "section_id": "section-08", "topic": "Be Aware of Your Surroundings", "subtopic": "Tailgating (Following Too Closely)", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If a vehicle merges in front of you too closely, take your foot off the accelerator to create space."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-032", "question_type": "multiple_choice", "question_text": "What usually causes a locked wheel skid?", "choices": [{"label": "A", "text": "Turning the steering wheel too slowly"}, {"label": "B", "text": "Braking too hard when going too fast"}, {"label": "C", "text": "Accelerating too quickly from a stop"}, {"label": "D", "text": "Driving on a flat tire"}], "correct_answer": "B", "explanation": "A locked wheel skid is usually caused by braking too hard when you are going too fast. The tires stop rotating and the vehicle slides regardless of steering input.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Locked Wheel Skids", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["A locked wheel skid is usually caused by braking too hard when you are going too fast."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-040", "question_type": "multiple_choice", "question_text": "If you press the brake pedal and it sinks to the floor, what should you do?", "choices": [{"label": "A", "text": "Press harder on the brake pedal"}, {"label": "B", "text": "Shift into a higher gear"}, {"label": "C", "text": "Quickly pump the brakes by gently applying and releasing pressure on your brake pedal"}, {"label": "D", "text": "Turn off the engine immediately"}], "correct_answer": "C", "explanation": "If you press the brake pedal and it sinks to the floor, quickly pump the brakes by gently applying and releasing pressure on the brake pedal. This can help build up brake pressure.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Locked Wheel Skids", "difficulty": "hard", "image_id": null, "image_file": null, "source_facts": ["If you press the brake pedal and it sinks to the floor, quickly pump the brakes by gently applying and releasing pressure on the brake pedal."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-041", "question_type": "multiple_choice", "question_text": "If pumping the brakes does not work, what should you do to slow down?", "choices": [{"label": "A", "text": "Turn the steering wheel sharply to the right"}, {"label": "B", "text": "Open the car door to create drag"}, {"label": "C", "text": "Downshift into a lower or neutral gear to slow down, then try using your emergency brake"}, {"label": "D", "text": "Accelerate and try to find an uphill road"}], "correct_answer": "C", "explanation": "If you pump the brakes and they do not work, downshift your vehicle into a lower or neutral gear to slow down, then try using your emergency brake to stop.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Locked Wheel Skids", "difficulty": "hard", "image_id": null, "image_file": null, "source_facts": ["If you pump the brakes, down shift into a lower or neutral gear to slow down, then try using your emergency brake to stop."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-103", "question_type": "scenario", "question_text": "You are driving at night on a dark rural road when a vehicle with only one headlight approaches from the opposite direction. What should you do?", "choices": [{"label": "A", "text": "Flash your high beams to alert the other driver"}, {"label": "B", "text": "Move to the center of the road to get a better look"}, {"label": "C", "text": "Drive as far to the right as possible because it could be a bicycle, motorcycle, or vehicle with a missing headlight"}, {"label": "D", "text": "Stop your vehicle in the lane until the other vehicle passes"}], "correct_answer": "C", "explanation": "When a vehicle with one light drives toward you, drive as far to the right as possible. It could be a bicyclist, motorcyclist, or vehicle with a missing headlight, and its actual width is difficult to determine.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Darkness", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["When a vehicle with one light drives toward you, drive as far to the right as possible; it could be a bicyclist, motorcyclist, or a vehicle with a missing headlight."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-028", "question_type": "multiple_choice", "question_text": "How far should you sit from the airbag cover?", "choices": [{"label": "A", "text": "At least 6 inches"}, {"label": "B", "text": "At least 8 inches"}, {"label": "C", "text": "At least 10 inches"}, {"label": "D", "text": "At least 12 inches"}], "correct_answer": "C", "explanation": "You should ride at least 10 inches from the airbag cover, as long as you can maintain full control of your vehicle. This distance is measured from the center of the steering wheel to your breastbone.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Air Bags", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Ride at least 10 inches from the airbag cover as long as you can maintain full control of your vehicle."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-choose-between-hazards-001", "question_type": "multiple_choice", "question_text": "When dangers are on both sides of the road at the same time, you should:", "choices": [{"label": "A", "text": "Speed up to pass through quickly"}, {"label": "B", "text": "Give more space to the most dangerous situation"}, {"label": "C", "text": "Stop immediately in the middle of the road"}, {"label": "D", "text": "Drive exactly between the two hazards"}], "correct_answer": "B", "explanation": "When dangers are on both sides of the road at the same time, you should give more space to the most dangerous situation. If one danger is greater than the other, prioritize avoiding the greater hazard.", "section_id": "section-08", "topic": "Choose Between Hazards", "subtopic": "Choosing Between Hazards", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["When dangers are on both sides of the road at the same time, give more space to the most dangerous situation."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-038", "question_type": "scenario", "question_text": "You are driving with your 15-year-old niece in the passenger seat, and she unbuckles her seat belt because she says it is uncomfortable. What should you do?", "choices": [{"label": "A", "text": "Let her ride without a seat belt since she is almost 16"}, {"label": "B", "text": "Tell her to put the seat belt back on because you can get a ticket if a passenger under 16 is not wearing a seat belt"}, {"label": "C", "text": "Let her ride without a seat belt as long as you drive slowly"}, {"label": "D", "text": "Have her sit in the back seat where a seat belt is not required"}], "correct_answer": "B", "explanation": "You should tell her to put the seat belt back on. If your passengers are under 16 years old, you can get a ticket if they are not wearing their seat belt. Seat belts are required for all vehicle occupants.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Seat Belts", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["If your passenger is under 16 years old, you can also get a ticket if they are not wearing their seat belt.", "You and your passengers must wear seat belts."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-040", "question_type": "scenario", "question_text": "It is a hot summer day and you need to run into a store for a quick errand. Your 5-year-old child is in the back seat. Your 13-year-old is willing to stay in the car and watch the younger child. Is this legal?", "choices": [{"label": "A", "text": "No, because children under 8 must always be accompanied by an adult"}, {"label": "B", "text": "Yes, because a child may be left under the supervision of a person who is at least 12 years old"}, {"label": "C", "text": "No, because children under 6 can never be left in a vehicle"}, {"label": "D", "text": "Yes, but only if the windows are rolled down"}], "correct_answer": "B", "explanation": "A child who is six years old or younger may be left in a vehicle under the supervision of a person who is at least 12 years old. Since the 13-year-old is at least 12, this arrangement is legal. However, you should still be aware of heat dangers.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Unattended Children and Pets", "difficulty": "hard", "image_id": null, "image_file": null, "source_facts": ["It is illegal to leave a child who is six years old or younger unattended in a vehicle.", "A child may be left under the supervision of a person who is at least 12 years old."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-handle-emergencies-039", "question_type": "scenario", "question_text": "Your vehicle breaks down on the freeway during rush hour. You manage to pull over to the right shoulder. What is the safest course of action?", "choices": [{"label": "A", "text": "Get out and walk along the freeway to the nearest exit"}, {"label": "B", "text": "Stand behind your vehicle to alert other drivers"}, {"label": "C", "text": "Stay in your vehicle with your seat belt on, use emergency flashers, and dial 511 for assistance"}, {"label": "D", "text": "Try to push your vehicle to the nearest exit"}], "correct_answer": "C", "explanation": "If your vehicle becomes disabled on the freeway, stay inside with your seat belt on until help arrives. Use your emergency flashers at your discretion and dial 511 from your cell phone for assistance.", "section_id": "section-08", "topic": "Know How to Handle Emergencies", "subtopic": "If Your Vehicle Becomes Disabled on the Freeway", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Stay inside your vehicle with your seat belt on until help arrives.", "Use your emergency flashers at your discretion to help other vehicles see you at night and in different weather conditions.", "If your vehicle becomes disabled on the freeway, dial 511 from your cell phone or locate a call box for assistance."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-004", "question_type": "multiple_choice", "question_text": "If another vehicle\'s headlights are too bright, where should you look?", "choices": [{"label": "A", "text": "Directly at the oncoming headlights"}, {"label": "B", "text": "Toward the left edge of your lane"}, {"label": "C", "text": "Toward the right edge of your lane"}, {"label": "D", "text": "Down at your dashboard"}], "correct_answer": "C", "explanation": "If another vehicle\'s lights are too bright, look toward the right edge of your lane. Do not look directly into the oncoming headlights, as this can temporarily blind you.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Darkness", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If another vehicle\'s lights are too bright, look toward the right edge of your lane."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-058", "question_type": "multiple_choice", "question_text": "Which of the following helps you avoid hydroplaning?", "choices": [{"label": "A", "text": "Drive at a higher speed to cut through the water"}, {"label": "B", "text": "Drive slowly and steer around standing water if possible"}, {"label": "C", "text": "Apply your brakes frequently in wet conditions"}, {"label": "D", "text": "Use your high-beam headlights"}], "correct_answer": "B", "explanation": "To avoid hydroplaning, drive slowly and steer around standing water if possible. Reducing speed allows your tires to maintain better contact with the road surface.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Hydroplaning", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["To avoid hydroplaning, drive slowly.", "To avoid hydroplaning, steer around standing water if possible."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-001", "question_type": "true_false", "question_text": "You and your passengers are required by law to wear seat belts while driving in California.", "choices": [{"label": "True", "text": "True"}, {"label": "False", "text": "False"}], "correct_answer": "True", "explanation": "California law requires all occupants of a vehicle to wear seat belts. You can receive a ticket if you or your passengers are not wearing them.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Seat Belts", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["You and your passengers must wear seat belts."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-012", "question_type": "true_false", "question_text": "You must secure children with a federally-approved child passenger restraint system or safety belt.", "choices": [{"label": "True", "text": "True"}, {"label": "False", "text": "False"}], "correct_answer": "True", "explanation": "California law requires that children be secured with a federally-approved child passenger restraint system or safety belt. The specific requirements depend on the child\'s height and age.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Child Restraint System and Safety Seats", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["You must secure children with a federally-approved child passenger restraint system or safety belt."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-manage-your-speed-008", "question_type": "multiple_choice", "question_text": "Unless otherwise posted, what is the ideal maximum speed limit on a two-lane undivided highway?", "choices": [{"label": "A", "text": "45 mph"}, {"label": "B", "text": "50 mph"}, {"label": "C", "text": "55 mph"}, {"label": "D", "text": "65 mph"}], "correct_answer": "C", "explanation": "Unless otherwise posted, the ideal maximum speed limit is 55 mph on a two-lane undivided highway. This is lower than the 65 mph limit on most California highways.", "section_id": "section-08", "topic": "Manage Your Speed", "subtopic": "Basic Speed Law", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Unless otherwise posted, the ideal maximum speed limit is 55 mph on a two-lane undivided highway and for vehicles towing trailers."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-handle-emergencies-002", "question_type": "multiple_choice", "question_text": "What is the first thing you should do if you experience a tire blowout while driving?", "choices": [{"label": "A", "text": "Immediately pull off the road"}, {"label": "B", "text": "Hold the steering wheel with both hands"}, {"label": "C", "text": "Apply the brakes firmly"}, {"label": "D", "text": "Turn on your emergency flashers"}], "correct_answer": "B", "explanation": "During a tire blowout, the recommended first step is to hold the steering wheel with both hands to maintain control of the vehicle.", "section_id": "section-08", "topic": "Know How to Handle Emergencies", "subtopic": "Tire Blowouts", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["During a tire blowout, hold the steering wheel with both hands."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-aware-of-your-surroundings-014", "question_type": "true_false", "question_text": "It is acceptable to stay in another driver\'s blind spot as long as you are driving at the same speed.", "choices": [{"label": "True", "text": "True"}, {"label": "False", "text": "False"}], "correct_answer": "False", "explanation": "You should not stay in another driver\'s blind spot. Being in a blind spot means the other driver cannot see you, which increases the risk of a collision if they change lanes or make a turn.", "section_id": "section-08", "topic": "Be Aware of Your Surroundings", "subtopic": "Know What Is at Your Side", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["Do not stay in another driver\'s blind spot."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-002", "question_type": "true_false", "question_text": "You should make sure you can stop within the distance lit by your headlights when driving at night.", "choices": [{"label": "True", "text": "True"}, {"label": "False", "text": "False"}], "correct_answer": "True", "explanation": "When driving at night, make sure you can stop in the distance lit by your headlights. This ensures you have enough reaction distance to stop safely for any hazard.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Darkness", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Make sure you can stop in the distance lit by your headlights."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-039", "question_type": "multiple_choice", "question_text": "If your vehicle does NOT have ABS and begins to skid, what should you do?", "choices": [{"label": "A", "text": "Apply the brakes firmly and hold them down"}, {"label": "B", "text": "Quickly pump your brakes until you are at a safe speed"}, {"label": "C", "text": "Remove your foot from the brake pedal completely"}, {"label": "D", "text": "Shift into a higher gear"}], "correct_answer": "B", "explanation": "If your vehicle is not equipped with ABS and begins to skid, quickly pump your brakes until you are at a safe speed. Pumping the brakes alternately locks and unlocks the wheels to maintain some steering control.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Locked Wheel Skids", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If your vehicle is not equipped with ABS and begins to skid, quickly pump your brakes until you are at a safe speed."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-047", "question_type": "true_false", "question_text": "Bridges and overpasses tend to freeze before the rest of the road.", "choices": [{"label": "True", "text": "True"}, {"label": "False", "text": "False"}], "correct_answer": "True", "explanation": "Bridges and overpasses tend to freeze before the rest of the road and can have icy spots. This is because cold air circulates both above and below the roadway surface.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Slippery Roads", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Bridges and overpasses tend to freeze before the rest of the road and can have icy spots."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-049", "question_type": "multiple_choice", "question_text": "In a heavy rainstorm or snowstorm, what should you turn on?", "choices": [{"label": "A", "text": "High-beam headlights, hazard lights, and radio"}, {"label": "B", "text": "Windshield wipers, low-beam headlights, and defroster"}, {"label": "C", "text": "Interior lights, fog lights, and air conditioning"}, {"label": "D", "text": "Parking lights, windshield wipers, and cruise control"}], "correct_answer": "B", "explanation": "In rain or snow, turn on your windshield wipers, low-beam headlights, and defroster. These help you see the road and keep your windshield clear.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Slippery Roads", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["Turn on your windshield wipers, low-beam headlights, and defroster in rain or snow."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-057", "question_type": "multiple_choice", "question_text": "During hydroplaning, what could throw your vehicle into a skid?", "choices": [{"label": "A", "text": "Only heavy braking"}, {"label": "B", "text": "A slight change of direction, applying the brakes, or a gust of wind"}, {"label": "C", "text": "Only turning the steering wheel sharply"}, {"label": "D", "text": "Only excessive acceleration"}], "correct_answer": "B", "explanation": "During hydroplaning, a slight change of direction, applying the brakes, or a gust of wind could throw the vehicle into a skid because the tires have no contact with the road surface.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Hydroplaning", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["During hydroplaning, a slight change of direction, applying the brakes, or a gust of wind could throw the vehicle into a skid."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-070", "question_type": "multiple_choice", "question_text": "After driving through floodwater, what should you do?", "choices": [{"label": "A", "text": "Accelerate to dry off the vehicle"}, {"label": "B", "text": "Test your brakes to make sure they work correctly"}, {"label": "C", "text": "Turn off your headlights"}, {"label": "D", "text": "Pull over and turn off the engine for 10 minutes"}], "correct_answer": "B", "explanation": "After you make it through floodwater, test your brakes to make sure they work correctly. Water can reduce braking effectiveness.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Flooded Roads", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["After you make it through floodwater, test your brakes to make sure they work correctly."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-101", "question_type": "scenario", "question_text": "You are driving your light truck with rear-wheel ABS on a snowy road when you brake too hard and enter a locked wheel skid. What should you do?", "choices": [{"label": "A", "text": "Press the brake pedal harder to engage ABS"}, {"label": "B", "text": "Ease up on the brake pedal to allow the front wheels to roll, then turn the steering wheel into the direction of the skid"}, {"label": "C", "text": "Remove your foot completely from the brake pedal and accelerate"}, {"label": "D", "text": "Pump the brakes rapidly until you stop"}], "correct_answer": "B", "explanation": "If your vehicle has rear-wheel ABS (common in light trucks), ease up on the brake pedal while maintaining just enough pressure to allow the front wheels to roll again so you can steer. Then stop braking and turn the steering wheel into the direction of the skid.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Locked Wheel Skids", "difficulty": "hard", "image_id": null, "image_file": null, "source_facts": ["If your vehicle has rear-wheel ABS (common in light trucks), ease up on the brake pedal while maintaining just enough pressure to allow the front wheels to roll again so you can steer.", "If your vehicle has rear-wheel ABS, stop braking and turn the steering wheel into the direction of the skid."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-105", "question_type": "scenario", "question_text": "You are driving on a rainy evening and notice that the road seems extra slippery because it has not rained in weeks. Why is the road especially slippery?", "choices": [{"label": "A", "text": "The rainwater is colder than usual, creating a layer of ice"}, {"label": "B", "text": "Oil and dust on the road surface have not been washed away during the dry period"}, {"label": "C", "text": "The road surface has expanded due to heat"}, {"label": "D", "text": "The vehicle\'s tires have worn down from the heat"}], "correct_answer": "B", "explanation": "When it starts to rain after a dry period, the pavement can be very slippery because oil and dust on the road surface have not been washed away. You should slow down at the first sign of rain.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Slippery Roads", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["When it starts to rain, the pavement can be very slippery; slow down at the first sign of rain, drizzle, or snow."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-protect-yourself-passengers-017", "question_type": "multiple_choice", "question_text": "Under which condition may a child under 8 years old ride in the front seat in a federally-approved child passenger restraint system?", "choices": [{"label": "A", "text": "When the child prefers the front seat"}, {"label": "B", "text": "When there is no rear seat in the vehicle"}, {"label": "C", "text": "When the vehicle is traveling on a highway"}, {"label": "D", "text": "When the child is accompanied by a parent"}], "correct_answer": "B", "explanation": "Children under 8 years old may ride in the front seat in a federally-approved child passenger restraint system if there is no rear seat in the vehicle. Other exceptions include side-facing jump seats, rear-facing rear seats, improper installation in rear, all rear seats occupied by children 7 or younger, or medical reasons.", "section_id": "section-08", "topic": "Protect Yourself and Your Passengers", "subtopic": "Child Restraint System and Safety Seats", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["Children under 8 years old may ride in the front seat in a federally-approved child passenger restraint system if there is no rear seat."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-carbon-monoxide-001", "question_type": "multiple_choice", "question_text": "Which vehicles produce carbon monoxide?", "choices": [{"label": "A", "text": "Only diesel-powered vehicles"}, {"label": "B", "text": "Only vehicles older than 10 years"}, {"label": "C", "text": "All gas-powered vehicles"}, {"label": "D", "text": "Only vehicles without catalytic converters"}], "correct_answer": "C", "explanation": "All gas-powered vehicles produce carbon monoxide, which is a deadly odorless gas released from a vehicle\'s exhaust pipe.", "section_id": "section-08", "topic": "Be Aware of Carbon Monoxide", "subtopic": "Carbon Monoxide", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["All gas-powered vehicles produce carbon monoxide."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-aware-of-your-surroundings-044", "question_type": "multiple_choice", "question_text": "You should check your blind spots before merging with traffic. What is the correct way to check?", "choices": [{"label": "A", "text": "Turn only your head and look over your shoulder"}, {"label": "B", "text": "Turn your entire body to get the best view"}, {"label": "C", "text": "Use your rearview mirror and side mirrors only"}, {"label": "D", "text": "Turn the steering wheel slightly in the direction you want to merge"}], "correct_answer": "A", "explanation": "Before merging with traffic, check your blind spots by turning only your head and looking over your shoulder out of your side windows. Do not turn your whole body or the steering wheel.", "section_id": "section-08", "topic": "Be Aware of Your Surroundings", "subtopic": "Blind Spots", "difficulty": "hard", "image_id": null, "image_file": null, "source_facts": ["Check your blind spots before you merge with traffic.", "Only turn your head when you look over your shoulder; do not turn your whole body or steering wheel."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-005", "question_type": "true_false", "question_text": "If another driver has their high-beam headlights on, you should keep your high-beams on to retaliate.", "choices": [{"label": "True", "text": "True"}, {"label": "False", "text": "False"}], "correct_answer": "False", "explanation": "Do not keep your high-beam headlights on to react to another driver. This only makes it harder for both of you to see, increasing the danger for everyone.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Darkness", "difficulty": "easy", "image_id": null, "image_file": null, "source_facts": ["Do not keep your high-beam headlights on to react to another driver; it makes it harder for both of you to see."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-028", "question_type": "true_false", "question_text": "If you start to skid, you should immediately apply the brakes.", "choices": [{"label": "True", "text": "True"}, {"label": "False", "text": "False"}], "correct_answer": "False", "explanation": "If you start to skid, do not use the brakes. Braking during a skid can make the situation worse and cause you to lose more control of your vehicle.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Slippery Surface Skids", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["If you start to skid, do not use the brakes."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}, {"question_id": "q-sec08-understand-road-conditions-050", "question_type": "multiple_choice", "question_text": "In a heavy rainstorm or snowstorm, you may not be able to see more than how far ahead of your vehicle?", "choices": [{"label": "A", "text": "50 feet"}, {"label": "B", "text": "100 feet"}, {"label": "C", "text": "200 feet"}, {"label": "D", "text": "500 feet"}], "correct_answer": "B", "explanation": "In a heavy rainstorm or snowstorm, you may not be able to see more than 100 feet in front of your vehicle. When visibility is this limited, you need to drastically reduce your speed.", "section_id": "section-08", "topic": "Understand the Road Conditions", "subtopic": "Slippery Roads", "difficulty": "medium", "image_id": null, "image_file": null, "source_facts": ["In a heavy rainstorm or snowstorm, you may not be able to see more than 100 feet in front of your vehicle."], "validation_status": "pass", "validation_notes": null, "_image_data_uri": null}]');

/* ---- State ---- */
var filtered = [];       // Current filtered/shuffled question list (indices into ALL_QUESTIONS)
var currentIdx = 0;      // Index into filtered[]
var answers = {};        // questionIndex -> selected choice index
var revealed = {};       // questionIndex -> true if answer was revealed

/* ---- DOM refs ---- */
var $counter = document.getElementById('q-counter');
var $sectionLabel = document.getElementById('q-section-label');
var $topicLabel = document.getElementById('q-topic-label');
var $difficultyLabel = document.getElementById('q-difficulty-label');
var $imageWrapper = document.getElementById('q-image-wrapper');
var $image = document.getElementById('q-image');
var $text = document.getElementById('q-text');
var $choices = document.getElementById('choices-container');
var $feedback = document.getElementById('feedback');
var $feedbackText = document.getElementById('feedback-text');
var $explanation = document.getElementById('explanation');
var $btnShow = document.getElementById('btn-show-answer');
var $btnPrev = document.getElementById('btn-prev');
var $btnNext = document.getElementById('btn-next');
var $progressBar = document.getElementById('progress-bar');
var $scoreCorrect = document.getElementById('score-correct');
var $scoreIncorrect = document.getElementById('score-incorrect');
var $scoreUnanswered = document.getElementById('score-unanswered');
var $questionContainer = document.getElementById('question-container');
var $summaryContainer = document.getElementById('summary-container');
var $emptyState = document.getElementById('empty-state');
var $filterSection = document.getElementById('filter-section');
var $filterTopic = document.getElementById('filter-topic');
var $filterDifficulty = document.getElementById('filter-difficulty');
var $filterType = document.getElementById('filter-type');
var $btnShuffle = document.getElementById('btn-shuffle');
var $btnReset = document.getElementById('btn-reset');

/* ---- Helpers ---- */
function escapeHtml(str) {
  var div = document.createElement('div');
  div.appendChild(document.createTextNode(str || ''));
  return div.innerHTML;
}

function getField(q, names, fallback) {
  for (var i = 0; i < names.length; i++) {
    if (q[names[i]] !== undefined && q[names[i]] !== null && q[names[i]] !== '') return q[names[i]];
  }
  return fallback || '';
}

function getSection(q) { return getField(q, ['section', 'section_id', 'section_title'], 'Unknown'); }
function getTopic(q) { return getField(q, ['topic', 'topic_title', 'topic_id'], ''); }
function getDifficulty(q) { return getField(q, ['difficulty', 'difficulty_level'], ''); }
function getType(q) { return getField(q, ['question_type', 'type'], 'multiple_choice'); }
function getQuestionText(q) { return getField(q, ['question_text', 'question', 'text'], ''); }
function getExplanation(q) { return getField(q, ['explanation', 'rationale', 'answer_explanation'], ''); }

function getChoices(q) {
  // Choices may be an array of strings or an array of objects with label/text keys.
  var raw = q.choices || q.options || q.answers || [];
  var result = [];
  for (var i = 0; i < raw.length; i++) {
    var c = raw[i];
    if (typeof c === 'string') {
      result.push(c);
    } else if (c && typeof c === 'object') {
      result.push(c.text || c.label || c.value || c.choice || JSON.stringify(c));
    } else {
      result.push(String(c));
    }
  }
  // For true_false questions with no explicit choices, supply them.
  if (result.length === 0 && getType(q) === 'true_false') {
    result = ['True', 'False'];
  }
  return result;
}

function getCorrectIndex(q) {
  // correct_answer may be an index (int), a letter (A/B/C/D), or the answer text.
  var ca = q.correct_answer !== undefined ? q.correct_answer : (q.answer !== undefined ? q.answer : null);
  if (ca === null || ca === undefined) return -1;
  var choices = getChoices(q);
  // Integer index
  if (typeof ca === 'number') return ca;
  var s = String(ca).trim();
  // Single letter A-Z
  if (/^[A-Za-z]$/.test(s)) {
    var idx = s.toUpperCase().charCodeAt(0) - 65;
    if (idx >= 0 && idx < choices.length) return idx;
  }
  // Letter with parentheses or period: "A)" or "A."
  var letterMatch = s.match(/^([A-Za-z])[\).:\s]/);
  if (letterMatch) {
    var li = letterMatch[1].toUpperCase().charCodeAt(0) - 65;
    if (li >= 0 && li < choices.length) return li;
  }
  // Exact text match
  for (var i = 0; i < choices.length; i++) {
    if (choices[i].trim() === s) return i;
  }
  // Substring match (correct_answer text contained in a choice)
  for (var j = 0; j < choices.length; j++) {
    if (choices[j].toLowerCase().indexOf(s.toLowerCase()) !== -1) return j;
    if (s.toLowerCase().indexOf(choices[j].toLowerCase()) !== -1) return j;
  }
  // Numeric string
  var num = parseInt(s, 10);
  if (!isNaN(num) && num >= 0 && num < choices.length) return num;
  return -1;
}

/* ---- Filter population ---- */
function populateFilters() {
  var sections = {}, topics = {}, difficulties = {}, types = {};
  for (var i = 0; i < ALL_QUESTIONS.length; i++) {
    var q = ALL_QUESTIONS[i];
    var s = getSection(q); if (s) sections[s] = true;
    var t = getTopic(q); if (t) topics[t] = true;
    var d = getDifficulty(q); if (d) difficulties[d] = true;
    var tp = getType(q); if (tp) types[tp] = true;
  }
  fillSelect($filterSection, sections);
  fillSelect($filterTopic, topics);
  fillSelect($filterDifficulty, difficulties);
  fillSelect($filterType, types);
}

function fillSelect(el, map) {
  var keys = Object.keys(map).sort();
  for (var i = 0; i < keys.length; i++) {
    var opt = document.createElement('option');
    opt.value = keys[i];
    opt.textContent = keys[i];
    el.appendChild(opt);
  }
}

/* ---- Filtering ---- */
function applyFilters() {
  var sv = $filterSection.value;
  var tv = $filterTopic.value;
  var dv = $filterDifficulty.value;
  var tpv = $filterType.value;
  filtered = [];
  for (var i = 0; i < ALL_QUESTIONS.length; i++) {
    var q = ALL_QUESTIONS[i];
    if (sv !== 'all' && getSection(q) !== sv) continue;
    if (tv !== 'all' && getTopic(q) !== tv) continue;
    if (dv !== 'all' && getDifficulty(q) !== dv) continue;
    if (tpv !== 'all' && getType(q) !== tpv) continue;
    filtered.push(i);
  }
  currentIdx = 0;
  updateView();
}

/* ---- Shuffle ---- */
function shuffleArray(arr) {
  for (var i = arr.length - 1; i > 0; i--) {
    var j = Math.floor(Math.random() * (i + 1));
    var tmp = arr[i]; arr[i] = arr[j]; arr[j] = tmp;
  }
}

/* ---- Score calculation ---- */
function calcScores() {
  var correct = 0, incorrect = 0, unanswered = 0;
  for (var i = 0; i < filtered.length; i++) {
    var qi = filtered[i];
    if (answers[qi] !== undefined) {
      var q = ALL_QUESTIONS[qi];
      if (answers[qi] === getCorrectIndex(q)) correct++;
      else incorrect++;
    } else {
      unanswered++;
    }
  }
  return { correct: correct, incorrect: incorrect, unanswered: unanswered, total: filtered.length };
}

function updateScoreDisplay() {
  var s = calcScores();
  $scoreCorrect.textContent = 'Correct: ' + s.correct;
  $scoreIncorrect.textContent = 'Incorrect: ' + s.incorrect;
  $scoreUnanswered.textContent = 'Remaining: ' + s.unanswered;
  // Progress bar: answered / total
  var pct = s.total > 0 ? ((s.correct + s.incorrect) / s.total * 100) : 0;
  $progressBar.style.width = pct + '%';
}

/* ---- Rendering ---- */
function renderQuestion() {
  if (filtered.length === 0) {
    $questionContainer.style.display = 'none';
    $summaryContainer.style.display = 'none';
    $emptyState.style.display = 'block';
    updateScoreDisplay();
    return;
  }
  $emptyState.style.display = 'none';
  $summaryContainer.style.display = 'none';
  $questionContainer.style.display = 'block';

  var qi = filtered[currentIdx];
  var q = ALL_QUESTIONS[qi];

  // Counter
  $counter.textContent = 'Question ' + (currentIdx + 1) + ' of ' + filtered.length;

  // Meta tags
  $sectionLabel.textContent = getSection(q);
  var topic = getTopic(q);
  $topicLabel.textContent = topic;
  $topicLabel.style.display = topic ? '' : 'none';
  var diff = getDifficulty(q);
  $difficultyLabel.textContent = diff;
  $difficultyLabel.style.display = diff ? '' : 'none';

  // Image
  var imgUri = q._image_data_uri;
  if (imgUri) {
    $image.src = imgUri;
    $imageWrapper.style.display = 'block';
  } else {
    $imageWrapper.style.display = 'none';
    $image.src = '';
  }

  // Question text
  $text.innerHTML = escapeHtml(getQuestionText(q));

  // Choices
  var choices = getChoices(q);
  $choices.innerHTML = '';
  var isRevealed = !!revealed[qi];
  var selectedIdx = answers[qi];
  var correctIdx = getCorrectIndex(q);
  var letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';

  for (var i = 0; i < choices.length; i++) {
    var btn = document.createElement('button');
    btn.className = 'choice-btn';
    btn.setAttribute('data-idx', i);

    var letterSpan = document.createElement('span');
    letterSpan.className = 'choice-letter';
    letterSpan.textContent = (i < letters.length ? letters[i] : (i + 1)) + '.';

    var textSpan = document.createElement('span');
    textSpan.className = 'choice-text';
    textSpan.textContent = choices[i];

    btn.appendChild(letterSpan);
    btn.appendChild(textSpan);

    // Styling based on state
    if (isRevealed) {
      if (i === correctIdx) {
        btn.classList.add('choice-correct');
      }
      if (selectedIdx !== undefined && i === selectedIdx && i !== correctIdx) {
        btn.classList.add('choice-incorrect');
      }
      btn.disabled = true;
    } else if (selectedIdx !== undefined && i === selectedIdx) {
      btn.classList.add('choice-selected');
    }

    btn.addEventListener('click', (function(idx) {
      return function() { selectChoice(idx); };
    })(i));

    $choices.appendChild(btn);
  }

  // Feedback
  if (isRevealed) {
    $feedback.style.display = 'block';
    if (selectedIdx === correctIdx) {
      $feedbackText.textContent = 'Correct!';
      $feedbackText.className = 'feedback-correct';
    } else if (selectedIdx !== undefined) {
      $feedbackText.textContent = 'Incorrect. The correct answer is ' + (correctIdx < letters.length ? letters[correctIdx] : (correctIdx + 1)) + '.';
      $feedbackText.className = 'feedback-incorrect';
    } else {
      $feedbackText.textContent = 'The correct answer is ' + (correctIdx < letters.length ? letters[correctIdx] : (correctIdx + 1)) + '.';
      $feedbackText.className = 'feedback-neutral';
    }
    var expl = getExplanation(q);
    if (expl) {
      $explanation.style.display = 'block';
      $explanation.innerHTML = '<strong>Explanation:</strong> ' + escapeHtml(expl);
    } else {
      $explanation.style.display = 'none';
    }
    $btnShow.style.display = 'none';
  } else {
    $feedback.style.display = 'none';
    $explanation.style.display = 'none';
    $btnShow.style.display = '';
  }

  // Nav buttons
  $btnPrev.disabled = (currentIdx === 0);
  $btnNext.textContent = (currentIdx === filtered.length - 1) ? 'Finish' : 'Next \u2192';

  updateScoreDisplay();
}

function selectChoice(idx) {
  var qi = filtered[currentIdx];
  if (revealed[qi]) return;
  answers[qi] = idx;
  renderQuestion();
}

function revealAnswer() {
  var qi = filtered[currentIdx];
  revealed[qi] = true;
  renderQuestion();
}

function goNext() {
  if (currentIdx < filtered.length - 1) {
    currentIdx++;
    renderQuestion();
    window.scrollTo(0, 0);
  } else {
    showSummary();
  }
}

function goPrev() {
  if (currentIdx > 0) {
    currentIdx--;
    renderQuestion();
    window.scrollTo(0, 0);
  }
}

/* ---- Summary ---- */
function showSummary() {
  $questionContainer.style.display = 'none';
  $emptyState.style.display = 'none';
  $summaryContainer.style.display = 'block';

  var s = calcScores();
  var pct = s.total > 0 ? Math.round(s.correct / s.total * 100) : 0;
  var passed = pct >= 83;  // CA DMV passing score

  document.getElementById('summary-score').innerHTML =
    '<div class="summary-big-score">' + s.correct + ' / ' + s.total + '</div>' +
    '<div class="summary-pct ' + (passed ? 'summary-pass' : 'summary-fail') + '">' + pct + '%' +
    (passed ? ' -- PASS' : ' -- NEEDS PRACTICE') + '</div>' +
    '<div class="summary-detail">' +
    '<span class="score-chip correct-chip">Correct: ' + s.correct + '</span> ' +
    '<span class="score-chip incorrect-chip">Incorrect: ' + s.incorrect + '</span> ' +
    '<span class="score-chip unanswered-chip">Unanswered: ' + s.unanswered + '</span>' +
    '</div>';

  // Breakdown by section
  var sectionStats = {};
  for (var i = 0; i < filtered.length; i++) {
    var qi = filtered[i];
    var q = ALL_QUESTIONS[qi];
    var sec = getSection(q);
    if (!sectionStats[sec]) sectionStats[sec] = { correct: 0, incorrect: 0, unanswered: 0, total: 0 };
    sectionStats[sec].total++;
    if (answers[qi] !== undefined) {
      if (answers[qi] === getCorrectIndex(q)) sectionStats[sec].correct++;
      else sectionStats[sec].incorrect++;
    } else {
      sectionStats[sec].unanswered++;
    }
  }
  var bhtml = '<h3>Breakdown by Section</h3><table class="breakdown-table"><thead><tr><th>Section</th><th>Correct</th><th>Incorrect</th><th>Unanswered</th><th>Score</th></tr></thead><tbody>';
  var skeys = Object.keys(sectionStats).sort();
  for (var j = 0; j < skeys.length; j++) {
    var st = sectionStats[skeys[j]];
    var sp = st.total > 0 ? Math.round(st.correct / st.total * 100) : 0;
    bhtml += '<tr><td>' + escapeHtml(skeys[j]) + '</td><td>' + st.correct + '</td><td>' + st.incorrect + '</td><td>' + st.unanswered + '</td><td>' + sp + '%</td></tr>';
  }
  bhtml += '</tbody></table>';
  document.getElementById('summary-breakdown').innerHTML = bhtml;

  updateScoreDisplay();
}

/* ---- Main view toggle ---- */
function updateView() {
  renderQuestion();
}

/* ---- Reset ---- */
function resetAll() {
  answers = {};
  revealed = {};
  currentIdx = 0;
  updateView();
}

/* ---- Event listeners ---- */
$btnShow.addEventListener('click', revealAnswer);
$btnNext.addEventListener('click', goNext);
$btnPrev.addEventListener('click', goPrev);
$filterSection.addEventListener('change', applyFilters);
$filterTopic.addEventListener('change', applyFilters);
$filterDifficulty.addEventListener('change', applyFilters);
$filterType.addEventListener('change', applyFilters);
$btnShuffle.addEventListener('click', function() {
  shuffleArray(filtered);
  currentIdx = 0;
  updateView();
});
$btnReset.addEventListener('click', resetAll);
document.getElementById('btn-review').addEventListener('click', function() {
  currentIdx = 0;
  $summaryContainer.style.display = 'none';
  $questionContainer.style.display = 'block';
  renderQuestion();
});
document.getElementById('btn-restart').addEventListener('click', function() {
  resetAll();
  $summaryContainer.style.display = 'none';
});

// Keyboard navigation
document.addEventListener('keydown', function(e) {
  if ($summaryContainer.style.display !== 'none') return;
  if ($questionContainer.style.display === 'none') return;
  if (e.key === 'ArrowRight' || e.key === 'n') goNext();
  else if (e.key === 'ArrowLeft' || e.key === 'p') goPrev();
  else if (e.key === 'Enter' || e.key === ' ') {
    var qi = filtered[currentIdx];
    if (!revealed[qi]) { e.preventDefault(); revealAnswer(); }
  }
  else if (e.key >= '1' && e.key <= '9') {
    var ci = parseInt(e.key, 10) - 1;
    var qi2 = filtered[currentIdx];
    if (!revealed[qi2] && ci < getChoices(ALL_QUESTIONS[qi2]).length) selectChoice(ci);
  }
  else if (e.key >= 'a' && e.key <= 'z' && e.key.length === 1) {
    var ci2 = e.key.charCodeAt(0) - 97;
    var qi3 = filtered[currentIdx];
    if (!revealed[qi3] && ci2 < getChoices(ALL_QUESTIONS[qi3]).length) selectChoice(ci2);
  }
});

/* ---- Init ---- */
populateFilters();
applyFilters();

})();
</script>
</body>
</html>